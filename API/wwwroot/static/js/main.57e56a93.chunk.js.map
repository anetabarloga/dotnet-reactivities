{"version":3,"sources":["app/models/pagination.ts","app/api/agent.ts","app/common/enums/Filters.ts","app/models/activity.ts","app/models/profile.ts","app/stores/activityStore.ts","app/stores/profileStore.ts","app/stores/userStore.ts","app/stores/store.ts","app/stores/commonStore.ts","app/stores/modalStore.ts","app/stores/commentStore.ts","app/layout/NavBar.tsx","features/activities/dashboard/ActivityFilters.tsx","features/users/profiles/ProfileCard.tsx","features/activities/dashboard/ActivityListItemAttendee.tsx","features/activities/dashboard/ActivityListItem.tsx","features/activities/dashboard/ActivityList.tsx","features/activities/dashboard/ActivityListItemPlaceholder.tsx","features/activities/dashboard/ActivityDashboard.tsx","app/common/forms/CommonTextInput.tsx","features/users/forms/LoginForm.tsx","features/errors/ValidationErrors.tsx","features/users/forms/RegisterForm.tsx","features/home/HomePage.tsx","app/layout/LoadingComponent.tsx","app/common/forms/CommonTextArea.tsx","app/common/forms/DropdownInput.tsx","app/common/enums/categories.ts","app/common/forms/DateInput.tsx","features/activities/forms/ActivityForm.tsx","features/activities/details/ActivityDetailedChat.tsx","features/activities/details/ActivityDetailedHeader.tsx","features/activities/details/ActivityDetailedInfo.tsx","features/activities/details/ActivityDetailedSidebar.tsx","features/activities/details/ActivityDetails.tsx","features/errors/TestErrors.tsx","features/errors/NotFound.tsx","features/errors/ServerError.tsx","app/common/modals/ModalContainer.tsx","features/users/profiles/ActivityCard.tsx","features/users/profiles/ProfileActivities.tsx","features/users/forms/ProfileEditForm.tsx","features/users/profiles/ProfileDetails.tsx","features/users/profiles/ProfileFollowings.tsx","app/common/uploads/PhotoWidgetCropper.tsx","app/common/uploads/PhotoWidgetDropzone.tsx","app/common/uploads/PhotoUploadWidget.tsx","features/users/profiles/ProfilePhotos.tsx","features/users/profiles/ProfileContent.tsx","features/users/profiles/FollowButton.tsx","features/users/profiles/ProfileHeader.tsx","features/users/profiles/ProfilePage.tsx","app/layout/PrivateRoute.tsx","app/layout/App.tsx","reportWebVitals.ts","app/layout/ScrollToTop.tsx","index.tsx"],"names":["PaginatedResult","data","pagination","this","PagingParams","pageNumber","pageSize","axios","defaults","baseURL","process","interceptors","request","use","config","token","store","commonStore","headers","Authorization","response","a","JSON","parse","error","status","toast","method","errors","hasOwnProperty","history","push","modalStateErrors","key","flat","setServerError","Promise","reject","Filters","responseBody","requests","url","get","then","body","post","put","delete","agent","Activities","list","params","details","id","create","activity","update","attend","Account","current","login","user","register","Profiles","getProfile","username","uploadPhoto","file","formData","FormData","append","setMainPhoto","deletePhoto","updateFollowings","updateProfile","profile","listFollowings","predicate","listActivities","Activity","init","Object","assign","ActivityFormValues","undefined","title","category","city","description","date","venue","Profile","displayName","image","ActivityStore","activityRegistry","Map","selectedActivity","editMode","loading","loadingInitial","pagingParams","set","all","setPredicate","value","resetPredicate","forEach","startDate","isGoing","isHost","console","loadActivities","setLoadingInitial","axiosParams","result","setActivity","setPagination","log","setPagingParams","loadActivity","getActivity","runInAction","userStore","attendees","some","hostUsername","host","find","x","Date","state","createActivity","attendee","newActivity","updateActivity","updatedActivity","deleteActivity","updateAttendance","filter","u","cancelActivityToggle","isCancelled","clearSelectedActivity","updateAttendeeFollowing","following","followersCount","makeAutoObservable","reaction","keys","clear","Array","from","values","sort","b","getTime","entries","activitiesByDate","reduce","activities","format","URLSearchParams","toString","toISOString","ProfileStore","loadingProfile","loadingPhoto","loadingFollowings","loadingActivities","uploading","followings","activeTab","setActiveTab","tab","loadProfile","photo","photos","isMain","setImage","p","updateFollowing","shouldFollow","activityStore","followingsCount","loadFollowings","setDisplayName","UserStore","name","creds","setToken","modalStore","closeModal","logout","window","localStorage","removeItem","getUser","getItem","appLoaded","setAppLoaded","setItem","modal","open","openModal","content","profileStore","commentStore","comments","hubConnection","createHubConnection","activityId","HubConnectionBuilder","withUrl","accessTokenFactory","withAutomaticReconnect","configureLogging","LogLevel","Information","build","start","catch","e","on","comment","createdAt","split","unshift","stopHubConnection","stop","clearComments","addComment","invoke","StoreContext","createContext","useStore","useContext","observer","Menu","inverted","fixed","Container","Item","as","NavLink","exact","to","header","src","alt","style","marginRight","Button","positive","position","Image","avatar","spaced","Dropdown","pointing","text","Link","icon","onClick","vertical","size","width","marginTop","Header","attached","color","active","has","onChange","ProfileCard","bio","Card","Content","Description","length","substring","extra","Icon","iconStyleFollowing","borderColor","borderWidth","List","horizontal","map","Popup","hoverable","trigger","bordered","circular","ActivityListItem","Segment","Group","Label","marginBottom","basic","secondary","clearing","floated","groupedActivities","group","sub","ActivityListItemPlaceholder","Placeholder","fluid","minHeight","Line","Paragraph","disabled","useState","loadingNext","setLoadingNext","useEffect","Grid","Column","pageStart","loadMore","currentPage","hasMore","totalPages","initialLoad","Loader","CommonTextInput","props","useField","field","meta","Form","Field","touched","label","initialValues","email","password","onSubmit","setErrors","handleSubmit","isSubmitting","className","autoComplete","textAlign","placeholder","type","render","ValidationErrors","Message","err","i","validationSchema","yup","required","isValid","dirty","isLoggedIn","LoadingComponent","Dimmer","CommonTextArea","rows","DropdownInput","helpers","Select","clearable","options","d","setValue","onBlur","setTouched","categories","DateInput","selected","useHistory","useParams","nullable","enableReinitialize","uuid","handleFormSubmit","placeholderText","showTimeSelect","timeCaption","dateFormat","border","resetForm","onKeyPress","shiftKey","preventDefault","Comment","Avatar","Author","Metadata","formatDistanceToNow","Text","whiteSpace","activityImageStyle","activityImageTextStyle","bottom","left","height","padding","zIndex","top","ribbon","verticalAlign","relaxed","divided","Extra","TestErrors","widths","baseUrl","primary","NotFound","Inline","message","Modal","onClose","ActivityCard","objectFit","Meta","panes","menuItem","pane","Tab","Pane","menu","onTabChange","activeIndex","handleTabChange","itemsPerRow","setEditMode","isCurrentUser","editProfileMode","setEditProfileMode","Divider","PhotoWidgetCropper","setCropper","preview","initialAspectRatio","aspectRatio","guides","viewMode","autoCropArea","background","onInitialized","cropper","PhotoWidgetDropzone","setFiles","dropzoneStyle","borderRadius","paddingTop","onDrop","useCallback","acceptedFiles","URL","createObjectURL","useDropzone","getRootProps","getInputProps","isDragActive","PhotoUploadWidget","files","revokeObjectURL","overflow","getCroppedCanvas","toBlob","blob","disable","addPhotoMode","setAddPhotoMode","target","setTarget","animated","event","currentTarget","handleSetMainPhoto","visible","hidden","handleDeletePhoto","ProfileDetails","menuPosition","Reveal","handleFollow","Statistic","PrivateRoute","Component","component","rest","location","useLocation","finally","hideProgressBar","path","HomePage","ActivityDashboard","ActivityDetails","ProfilePage","ActivityForm","ServerError","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ScrollToTop","pathname","scrollTo","createBrowserHistory","ReactDOM","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.57e56a93.chunk.js","sourcesContent":["export interface Pagination {\r\n\tcurrentPage: number;\r\n\titemsPerPage: number;\r\n\ttotalItems: number;\r\n\ttotalPages: number;\r\n}\r\n\r\nexport class PaginatedResult<T> {\r\n\tdata: T;\r\n\tpagination: Pagination;\r\n\r\n\tconstructor(data: T, pagination: Pagination) {\r\n\t\tthis.data = data;\r\n\t\tthis.pagination = pagination;\r\n\t}\r\n}\r\n\r\nexport class PagingParams {\r\n\tpageNumber;\r\n\tpageSize;\r\n\r\n\tconstructor(pageNumber = 1, pageSize = 2) {\r\n\t\tthis.pageNumber = pageNumber;\r\n\t\tthis.pageSize = pageSize;\r\n\t}\r\n}\r\n","import axios, { AxiosError, AxiosResponse } from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { history } from \"../..\";\r\nimport { Activity, ActivityFormValues } from \"../models/Activity\";\r\nimport { PaginatedResult } from \"../models/pagination\";\r\nimport { Photo, Profile, UserActivity } from \"../models/Profile\";\r\nimport { User, UserFormValues } from \"../models/User\";\r\nimport { store } from \"../stores/store\";\r\n\r\nconst sleep = (delay: number) => {\r\n\treturn new Promise((resolve) => {\r\n\t\tsetTimeout(resolve, delay);\r\n\t});\r\n};\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\n\r\naxios.interceptors.request.use((config) => {\r\n\tconst token = store.commonStore.token;\r\n\tif (token) {\r\n\t\tconfig.headers!.Authorization = `Bearer ${token}`;\r\n\t}\r\n\treturn config;\r\n});\r\n\r\naxios.interceptors.response.use(\r\n\tasync (response) => {\r\n\t\tif (process.env.NODE_ENV === \"development\") await sleep(1000);\r\n\r\n\t\tconst pagination = response.headers[\"pagination\"];\r\n\t\tif (pagination) {\r\n\t\t\tresponse.data = new PaginatedResult(response.data, JSON.parse(pagination));\r\n\t\t\treturn response as AxiosResponse<PaginatedResult<any>>;\r\n\t\t} else {\r\n\t\t\treturn response;\r\n\t\t}\r\n\t},\r\n\t(error: AxiosError) => {\r\n\t\tconst { data, status, config } = error.response!;\r\n\r\n\t\tswitch (status) {\r\n\t\t\tcase 400:\r\n\t\t\t\tif (typeof data === \"string\") {\r\n\t\t\t\t\ttoast.error(data);\r\n\t\t\t\t}\r\n\t\t\t\t// handle case - bad guid\r\n\t\t\t\tif (config.method === \"get\" && data.errors.hasOwnProperty(\"id\")) {\r\n\t\t\t\t\thistory.push(\"/not-found\");\r\n\r\n\t\t\t\t\t// handle validation cases by collecting all thrown validation errors and return then in an array\r\n\t\t\t\t} else if (data.errors) {\r\n\t\t\t\t\tconst modalStateErrors = [];\r\n\r\n\t\t\t\t\tfor (const key in data.errors) {\r\n\t\t\t\t\t\tif (data.errors[key]) {\r\n\t\t\t\t\t\t\tmodalStateErrors.push(data.errors[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow modalStateErrors.flat();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 401:\r\n\t\t\t\ttoast.error(\"unauthorised\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase 404:\r\n\t\t\t\thistory.push(\"/not-found\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase 500:\r\n\t\t\t\tstore.commonStore.setServerError(data);\r\n\t\t\t\thistory.push(\"/server-error\");\r\n\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn Promise.reject(error);\r\n\t}\r\n);\r\n\r\nconst responseBody = <T>(response: AxiosResponse<T>) => response.data;\r\n\r\nconst requests = {\r\n\tget: <T>(url: string) => axios.get<T>(url).then(responseBody),\r\n\tpost: <T>(url: string, body: Object) => axios.post<T>(url, body).then(responseBody),\r\n\tput: <T>(url: string, body: Object) => axios.put<T>(url, body).then(responseBody),\r\n\tdel: <T>(url: string) => axios.delete<T>(url).then(responseBody),\r\n};\r\n\r\nconst Activities = {\r\n\tlist: (params: URLSearchParams) => axios.get<PaginatedResult<Activity[]>>(\"/activities\", { params }).then(responseBody),\r\n\tdetails: (id: string) => requests.get<Activity>(`/activities/${id}`),\r\n\tcreate: (activity: ActivityFormValues) => requests.post<void>(\"/activities/\", activity),\r\n\tupdate: (activity: ActivityFormValues) => requests.put<void>(`/activities/${activity.id}`, activity),\r\n\tdelete: (id: string) => requests.del<void>(`/activities/${id}`),\r\n\tattend: (id: string) => requests.post<void>(`/activities/${id}/attend`, {}),\r\n};\r\n\r\nconst Account = {\r\n\tcurrent: () => requests.get<User>(\"/account\"),\r\n\tlogin: (user: UserFormValues) => requests.post<User>(\"/account/login\", user),\r\n\tregister: (user: UserFormValues) => requests.post<User>(\"/account/register\", user),\r\n};\r\n\r\nconst Profiles = {\r\n\tgetProfile: (username: string) => requests.get<Profile>(`/profiles/${username}`),\r\n\tuploadPhoto: (file: Blob) => {\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append(\"File\", file);\r\n\t\treturn axios.post<Photo>(\"photos\", formData, {\r\n\t\t\theaders: { \"Content-type\": \"multipart/form-data\" },\r\n\t\t});\r\n\t},\r\n\tsetMainPhoto: (id: string) => {\r\n\t\trequests.post(`/photos/${id}/setMain`, {});\r\n\t},\r\n\tdeletePhoto: (id: string) => {\r\n\t\trequests.del(`/photos/${id}`);\r\n\t},\r\n\tupdateFollowings: (username: string) => {\r\n\t\trequests.post(`/follow/${username}`, {});\r\n\t},\r\n\tupdateProfile: (profile: Partial<Profile>) => {\r\n\t\trequests.put(`/profiles`, profile);\r\n\t},\r\n\tlistFollowings: (username: string, predicate: string) => requests.get<Profile[]>(`/follow/${username}?predicate=${predicate}`),\r\n\tlistActivities: (username: string, predicate: string) => requests.get<UserActivity[]>(`/profiles/${username}/activities?predicate=${predicate}`),\r\n};\r\n\r\nconst agent = { Activities, Account, Profiles };\r\n\r\nexport default agent;\r\n","export enum Filters {\r\n\tisHost = \"isHost\",\r\n\tisGoing = \"isGoing\",\r\n\tall = \"all\",\r\n\tstartDate = \"startDate\",\r\n}\r\n","import { Profile } from \"./Profile\";\r\n\r\nexport interface Activity {\r\n\tid: string;\r\n\ttitle: string;\r\n\tdate: Date | null;\r\n\tdescription: string;\r\n\tcategory: string;\r\n\tcity: string;\r\n\tvenue: string;\r\n\thostUsername: string;\r\n\tisCancelled: boolean;\r\n\tisGoing: boolean;\r\n\tisHost: boolean;\r\n\thost?: Profile;\r\n\tattendees?: Profile[];\r\n}\r\n\r\nexport class Activity implements Activity {\r\n\tconstructor(init?: ActivityFormValues) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n\r\nexport class ActivityFormValues {\r\n\tid?: string = undefined;\r\n\ttitle: string = \"\";\r\n\tcategory: string = \"\";\r\n\tcity: string = \"\";\r\n\tdescription: string = \"\";\r\n\tdate: Date | null = null;\r\n\tvenue: string = \"\";\r\n\r\n\tconstructor(activity?: ActivityFormValues) {\r\n\t\tif (activity) {\r\n\t\t\tthis.id = activity?.id;\r\n\t\t\tthis.title = activity.title;\r\n\t\t\tthis.category = activity.category;\r\n\t\t\tthis.city = activity.city;\r\n\t\t\tthis.description = activity.description;\r\n\t\t\tthis.date = activity.date;\r\n\t\t\tthis.venue = activity.venue;\r\n\t\t}\r\n\t}\r\n}\r\n","import { User } from \"./User\";\r\n\r\nexport interface UserActivity {\r\n\tid: string;\r\n\ttitle: string;\r\n\tdate: Date;\r\n\tcategory: string;\r\n}\r\n\r\nexport interface Profile {\r\n\tusername: string;\r\n\tdisplayName: string;\r\n\timage?: string;\r\n\tbio?: string;\r\n\tfollowersCount: number;\r\n\tfollowingsCount: number;\r\n\tfollowing: boolean;\r\n\tphotos?: Photo[];\r\n}\r\n\r\nexport class Profile implements Profile {\r\n\tconstructor(user: User) {\r\n\t\tthis.username = user.username;\r\n\t\tthis.displayName = user.displayName;\r\n\t\tthis.image = user.image;\r\n\t}\r\n}\r\n\r\nexport interface Photo {\r\n\tid: string;\r\n\turl: string;\r\n\tisMain: boolean;\r\n}\r\n","import { format } from \"date-fns\";\r\nimport { makeAutoObservable, reaction, runInAction } from \"mobx\";\r\nimport agent from \"../api/agent\";\r\nimport { Filters } from \"../common/enums/Filters\";\r\nimport { Activity, ActivityFormValues } from \"../models/activity\";\r\nimport { Pagination, PagingParams } from \"../models/pagination\";\r\nimport { Profile } from \"../models/profile\";\r\nimport { store } from \"./store\";\r\n\r\nexport default class ActivityStore {\r\n\tactivityRegistry = new Map<string, Activity>();\r\n\tselectedActivity: Activity | undefined = undefined;\r\n\teditMode = false;\r\n\tloading = false;\r\n\tloadingInitial = false;\r\n\tpagination: Pagination | null = null;\r\n\tpagingParams = new PagingParams();\r\n\tpredicate = new Map().set(Filters.all, true);\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\r\n\t\treaction(\r\n\t\t\t() => this.predicate.keys(),\r\n\t\t\t() => {\r\n\t\t\t\t// reset pagination to first page of result after applying new filter\r\n\t\t\t\tthis.pagingParams = new PagingParams();\r\n\t\t\t\tthis.activityRegistry.clear();\r\n\t\t\t\tthis.loadActivities();\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\t// computed properties\r\n\tget activitiesByDate() {\r\n\t\treturn Array.from(this.activityRegistry.values()).sort((a, b) => a.date!.getTime() - b.date!.getTime());\r\n\t}\r\n\r\n\tget groupedActivities() {\r\n\t\treturn Object.entries(\r\n\t\t\tthis.activitiesByDate.reduce((activities, activity) => {\r\n\t\t\t\tconst date = format(activity.date!, \"dd MMM yyyy\");\r\n\t\t\t\tactivities[date] = activities[date] ? [...activities[date], activity] : [activity];\r\n\t\t\t\treturn activities;\r\n\t\t\t}, {} as { [key: string]: Activity[] })\r\n\t\t);\r\n\t}\r\n\r\n\tget axiosParams() {\r\n\t\tconst params = new URLSearchParams();\r\n\t\tparams.append(\"pageNumber\", this.pagingParams.pageNumber.toString());\r\n\t\tparams.append(\"pageSize\", this.pagingParams.pageSize.toString());\r\n\r\n\t\tthis.predicate.forEach((value, key) => {\r\n\t\t\tif (key === Filters.startDate) {\r\n\t\t\t\tparams.append(key, (value as Date).toISOString());\r\n\t\t\t} else {\r\n\t\t\t\tparams.append(key, value);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn params;\r\n\t}\r\n\r\n\tsetPredicate = (predicate: string, value: string | Date) => {\r\n\t\tconst resetPredicate = () => {\r\n\t\t\tthis.predicate.forEach((value, key) => {\r\n\t\t\t\tif (key !== Filters.startDate) this.predicate.delete(key);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tswitch (predicate) {\r\n\t\t\tcase Filters.all:\r\n\t\t\t\tdebugger;\r\n\t\t\t\tresetPredicate();\r\n\t\t\t\tthis.predicate.set(Filters.all, value);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Filters.isGoing:\r\n\t\t\t\tresetPredicate();\r\n\t\t\t\tthis.predicate.set(Filters.isGoing, value);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Filters.isHost:\r\n\t\t\t\tresetPredicate();\r\n\t\t\t\tthis.predicate.set(Filters.isHost, value);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Filters.startDate:\r\n\t\t\t\t// we must first delete previous date to trigger change reaction\r\n\t\t\t\tthis.predicate.delete(Filters.startDate);\r\n\t\t\t\tthis.predicate.set(Filters.startDate, value);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.error(\"Predicate key unknown!\");\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tloadActivities = async () => {\r\n\t\tthis.setLoadingInitial(true);\r\n\t\ttry {\r\n\t\t\tconst result = await agent.Activities.list(this.axiosParams);\r\n\t\t\tresult.data.forEach((activity) => {\r\n\t\t\t\tthis.setActivity(activity);\r\n\t\t\t});\r\n\r\n\t\t\tthis.setPagination(result.pagination);\r\n\t\t\tthis.setLoadingInitial(false);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tthis.setLoadingInitial(false);\r\n\t\t}\r\n\t};\r\n\r\n\tsetPagination = (pagination: Pagination) => {\r\n\t\tthis.pagination = pagination;\r\n\t};\r\n\r\n\tsetPagingParams = (pagingParams: PagingParams) => {\r\n\t\tthis.pagingParams = pagingParams;\r\n\t};\r\n\r\n\tloadActivity = async (id: string) => {\r\n\t\tlet activity = this.getActivity(id);\r\n\r\n\t\tif (activity) {\r\n\t\t\tthis.selectedActivity = activity;\r\n\t\t\treturn activity;\r\n\t\t} else {\r\n\t\t\tthis.loadingInitial = true;\r\n\t\t\ttry {\r\n\t\t\t\tactivity = await agent.Activities.details(id);\r\n\t\t\t\tthis.setActivity(activity);\r\n\t\t\t\trunInAction(() => {\r\n\t\t\t\t\tthis.selectedActivity = activity;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.setLoadingInitial(false);\r\n\t\t\t\treturn activity;\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t\tthis.setLoadingInitial(false);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tprivate getActivity = (id: string) => {\r\n\t\treturn this.activityRegistry.get(id);\r\n\t};\r\n\r\n\tprivate setActivity = (activity: Activity) => {\r\n\t\tconst user = store.userStore.user;\r\n\r\n\t\tif (user) {\r\n\t\t\tactivity.isGoing = activity.attendees!.some((a) => a.username === user.username);\r\n\t\t\tactivity.isHost = activity.hostUsername === user.username;\r\n\t\t\tactivity.host = activity.attendees?.find((x) => x.username === activity.hostUsername);\r\n\t\t}\r\n\r\n\t\tactivity.date = new Date(activity.date!);\r\n\t\tthis.activityRegistry.set(activity.id, activity);\r\n\t};\r\n\r\n\t// this method was implemented to avoid the warning about strict mode (see runInAction in documentation)\r\n\tsetLoadingInitial = (state: boolean) => {\r\n\t\tthis.loadingInitial = state;\r\n\t};\r\n\r\n\tcreateActivity = async (activity: ActivityFormValues) => {\r\n\t\tconst user = store.userStore.user;\r\n\t\tconst attendee = new Profile(user!);\r\n\t\tconst newActivity = new Activity(activity);\r\n\t\tnewActivity.hostUsername = user!.username;\r\n\t\tnewActivity.attendees = [attendee];\r\n\t\tthis.setActivity(newActivity);\r\n\t\ttry {\r\n\t\t\tawait agent.Activities.create(activity);\r\n\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.selectedActivity = new Activity();\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\tupdateActivity = async (activity: ActivityFormValues) => {\r\n\t\ttry {\r\n\t\t\tawait agent.Activities.update(activity);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tif (activity.id) {\r\n\t\t\t\t\tlet updatedActivity = { ...this.getActivity(activity.id), ...activity };\r\n\t\t\t\t\tthis.activityRegistry.set(activity.id, updatedActivity as Activity);\r\n\t\t\t\t\tthis.selectedActivity = updatedActivity as Activity;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\tdeleteActivity = async (id: string) => {\r\n\t\tthis.loading = true;\r\n\t\ttry {\r\n\t\t\tawait agent.Activities.delete(id);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.activityRegistry.delete(id);\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tupdateAttendance = async () => {\r\n\t\tconst user = store.userStore.user;\r\n\t\tthis.loading = true;\r\n\r\n\t\ttry {\r\n\t\t\tawait agent.Activities.attend(this.selectedActivity!.id);\r\n\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tif (this.selectedActivity?.isGoing) {\r\n\t\t\t\t\tthis.selectedActivity.attendees = this.selectedActivity.attendees?.filter((u) => u.username !== user?.username);\r\n\t\t\t\t\tthis.selectedActivity.isGoing = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst attendee = new Profile(user!);\r\n\t\t\t\t\tthis.selectedActivity?.attendees?.push(attendee);\r\n\t\t\t\t\tthis.selectedActivity!.isGoing = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.activityRegistry.set(this.selectedActivity!.id, this.selectedActivity!);\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t} finally {\r\n\t\t\trunInAction(() => (this.loading = false));\r\n\t\t}\r\n\t};\r\n\r\n\tcancelActivityToggle = async () => {\r\n\t\tthis.loading = true;\r\n\r\n\t\ttry {\r\n\t\t\tawait agent.Activities.attend(this.selectedActivity!.id);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.selectedActivity!.isCancelled = !this.selectedActivity?.isCancelled;\r\n\t\t\t\tthis.activityRegistry.set(this.selectedActivity!.id, this.selectedActivity!);\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t} finally {\r\n\t\t\tthis.loading = false;\r\n\t\t}\r\n\t};\r\n\r\n\tclearSelectedActivity = () => {\r\n\t\tthis.selectedActivity = undefined;\r\n\t};\r\n\r\n\tupdateAttendeeFollowing = (username: string) => {\r\n\t\tthis.activityRegistry.forEach((activity) => {\r\n\t\t\tactivity.attendees!.forEach((attendee) => {\r\n\t\t\t\tif (attendee.username === username) {\r\n\t\t\t\t\tattendee.following ? attendee.followersCount-- : attendee.followersCount++;\r\n\t\t\t\t\tattendee.following = !attendee.following;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n}\r\n","import { makeAutoObservable, reaction, runInAction } from \"mobx\";\r\nimport agent from \"../api/agent\";\r\nimport { Photo, Profile, UserActivity } from \"../models/Profile\";\r\nimport { store } from \"./store\";\r\n\r\nexport default class ProfileStore {\r\n\tprofile: Profile | null = null;\r\n\tloadingProfile = false;\r\n\tloadingPhoto = false;\r\n\tloadingFollowings = false;\r\n\tloadingActivities = false;\r\n\tuploading = false;\r\n\tfollowings: Profile[] = [];\r\n\tactivities: UserActivity[] = [];\r\n\tactiveTab = 0;\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\r\n\t\treaction(\r\n\t\t\t() => this.activeTab,\r\n\t\t\t(activeTab) => {\r\n\t\t\t\tif (activeTab === 3 || activeTab === 4) {\r\n\t\t\t\t\tconst predicate = activeTab === 3 ? \"followers\" : \"following\";\r\n\t\t\t\t\tthis.loadFollowings(predicate);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.followings = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (activeTab === 2) {\r\n\t\t\t\t\tthis.loadActivities(this.profile!.username, \"future\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tsetActiveTab = (tab: any) => {\r\n\t\tthis.activeTab = tab;\r\n\t};\r\n\r\n\tget isCurrentUser() {\r\n\t\tif (store.userStore.user && this.profile) {\r\n\t\t\treturn store.userStore.user.username === this.profile.username;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tloadProfile = async (username: string) => {\r\n\t\tthis.loadingProfile = true;\r\n\t\ttry {\r\n\t\t\tconst profile = await agent.Profiles.getProfile(username);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.profile = profile;\r\n\t\t\t\tthis.loadingProfile = false;\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\trunInAction(() => (this.loadingProfile = false));\r\n\t\t}\r\n\t};\r\n\r\n\tuploadPhoto = async (file: Blob) => {\r\n\t\tthis.uploading = true;\r\n\t\ttry {\r\n\t\t\tconst response = await agent.Profiles.uploadPhoto(file);\r\n\t\t\tconst photo = response.data;\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tif (this.profile) {\r\n\t\t\t\t\tthis.profile.photos?.push(photo);\r\n\t\t\t\t\tif (photo.isMain && store.userStore.user) {\r\n\t\t\t\t\t\tstore.userStore.setImage(photo.url);\r\n\t\t\t\t\t\tthis.profile.image = photo.url;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.uploading = false;\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\trunInAction(() => (this.uploading = false));\r\n\t\t}\r\n\t};\r\n\r\n\tsetMainPhoto = async (photo: Photo) => {\r\n\t\tthis.loadingPhoto = true;\r\n\t\ttry {\r\n\t\t\tawait agent.Profiles.setMainPhoto(photo.id); // there was an await here\r\n\t\t\tstore.userStore.setImage(photo.id);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\t// reset current main photo\r\n\t\t\t\tif (this.profile && this.profile.photos) {\r\n\t\t\t\t\tthis.profile.photos.find((p) => p.isMain)!.isMain = false;\r\n\t\t\t\t\tthis.profile.photos.find((p) => p.id === photo.id)!.isMain = true;\r\n\t\t\t\t\tthis.profile.image = photo.url;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t} finally {\r\n\t\t\trunInAction(() => (this.loadingPhoto = false));\r\n\t\t}\r\n\t};\r\n\r\n\tdeletePhoto = async (photo: Photo) => {\r\n\t\tthis.loadingPhoto = true;\r\n\t\ttry {\r\n\t\t\tawait agent.Profiles.deletePhoto(photo.id);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tif (this.profile && this.profile.photos) {\r\n\t\t\t\t\tthis.profile.photos = this.profile.photos.filter((p) => p.id !== photo.id);\r\n\t\t\t\t\tthis.loadingPhoto = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\trunInAction(() => (this.loadingPhoto = false));\r\n\t\t}\r\n\t};\r\n\r\n\tupdateFollowing = async (username: string, shouldFollow: boolean) => {\r\n\t\tthis.loadingProfile = true;\r\n\t\ttry {\r\n\t\t\tawait agent.Profiles.updateFollowings(username);\r\n\t\t\tstore.activityStore.updateAttendeeFollowing(username);\r\n\r\n\t\t\trunInAction(() => {\r\n\t\t\t\t// check if updating for current or other user\r\n\r\n\t\t\t\t// if updating for other user,\r\n\t\t\t\tif (this.profile && this.profile.username !== store.userStore.user?.username && this.profile.username !== username) {\r\n\t\t\t\t\tshouldFollow ? this.profile.followersCount++ : this.profile.followersCount--;\r\n\t\t\t\t\tthis.profile.following = !this.profile.following;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.profile && this.profile.username === store.userStore.user?.username) {\r\n\t\t\t\t\tshouldFollow ? this.profile.followingsCount++ : this.profile.followingsCount--;\r\n\t\t\t\t}\r\n\t\t\t\tthis.followings.forEach((profile) => {\r\n\t\t\t\t\tif (profile.username === username) {\r\n\t\t\t\t\t\tprofile.following ? profile.followersCount-- : profile.followersCount++;\r\n\t\t\t\t\t\tprofile.following = !profile.following;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.loadingProfile = false;\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\trunInAction(() => (this.loadingProfile = false));\r\n\t\t}\r\n\t};\r\n\r\n\tloadFollowings = async (predicate: string) => {\r\n\t\tthis.loadingFollowings = true;\r\n\t\ttry {\r\n\t\t\tconst followings = await agent.Profiles.listFollowings(this.profile!.username, predicate);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.followings = followings;\r\n\t\t\t\tthis.loadingFollowings = false;\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\trunInAction(() => (this.loadingFollowings = false));\r\n\t\t}\r\n\t};\r\n\r\n\tloadActivities = async (username: string, predicate?: string) => {\r\n\t\tthis.loadingActivities = true;\r\n\t\ttry {\r\n\t\t\tconst activities = await agent.Profiles.listActivities(username, predicate!);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.activities = activities;\r\n\t\t\t\tthis.loadingActivities = false;\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\trunInAction(() => (this.loadingActivities = false));\r\n\t\t}\r\n\t};\r\n\r\n\tupdateProfile = async (profile: Partial<Profile>) => {\r\n\t\tthis.loadingProfile = true;\r\n\t\ttry {\r\n\t\t\tawait agent.Profiles.updateProfile(profile);\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tif (profile.displayName && profile.displayName !== store.userStore.user?.displayName) {\r\n\t\t\t\t\tstore.userStore.setDisplayName(profile.displayName);\r\n\t\t\t\t}\r\n\t\t\t\tthis.profile = { ...this.profile, ...(profile as Profile) };\r\n\t\t\t\tthis.loadingProfile = false;\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\trunInAction(() => (this.loadingProfile = false));\r\n\t\t}\r\n\t};\r\n}\r\n","import { makeAutoObservable, runInAction } from \"mobx\";\r\nimport agent from \"../api/agent\";\r\nimport { User, UserFormValues } from \"../models/User\";\r\nimport { store } from \"./store\";\r\nimport { history } from \"../..\";\r\n\r\nexport default class UserStore {\r\n\tuser: User | null = null;\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\tget isLoggedIn() {\r\n\t\treturn !!this.user;\r\n\t}\r\n\r\n\tsetDisplayName = (name: string) => {\r\n\t\tif (this.user) this.user.displayName = name;\r\n\t};\r\n\r\n\tlogin = async (creds: UserFormValues) => {\r\n\t\ttry {\r\n\t\t\tconst user = await agent.Account.login(creds);\r\n\t\t\tstore.commonStore.setToken(user.token);\r\n\t\t\trunInAction(() => (this.user = user));\r\n\t\t\thistory.push(\"/activities\");\r\n\t\t\tstore.modalStore.closeModal();\r\n\t\t} catch (error) {\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t};\r\n\r\n\tlogout = () => {\r\n\t\tstore.commonStore.setToken(null);\r\n\t\twindow.localStorage.removeItem(\"jwt\");\r\n\t\tthis.user = null;\r\n\t\thistory.push(\"/\");\r\n\t};\r\n\r\n\tregister = async (creds: UserFormValues) => {\r\n\t\ttry {\r\n\t\t\tconst user = await agent.Account.register(creds);\r\n\t\t\tstore.commonStore.setToken(user.token);\r\n\t\t\trunInAction(() => (this.user = user));\r\n\t\t\thistory.push(\"/activities\");\r\n\t\t\tstore.modalStore.closeModal();\r\n\t\t} catch (error) {\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t};\r\n\r\n\tgetUser = async () => {\r\n\t\ttry {\r\n\t\t\tconst user = await agent.Account.current();\r\n\t\t\tstore.commonStore.setToken(user.token);\r\n\t\t\trunInAction(() => (this.user = user));\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\tsetImage = (image: string) => {\r\n\t\tif (this.user) this.user.image = image;\r\n\t};\r\n}\r\n","import { createContext, useContext } from \"react\";\r\nimport ActivityStore from \"./activityStore\";\r\nimport CommentStore from \"./commentStore\";\r\nimport CommonStore from \"./commonStore\";\r\nimport ModalStore from \"./modalStore\";\r\nimport ProfileStore from \"./profileStore\";\r\nimport UserStore from \"./userStore\";\r\n\r\ninterface Store {\r\n\tactivityStore: ActivityStore;\r\n\tcommonStore: CommonStore;\r\n\tuserStore: UserStore;\r\n\tmodalStore: ModalStore;\r\n\tprofileStore: ProfileStore;\r\n\tcommentStore: CommentStore;\r\n}\r\n\r\nexport const store: Store = {\r\n\tactivityStore: new ActivityStore(),\r\n\tcommonStore: new CommonStore(),\r\n\tuserStore: new UserStore(),\r\n\tmodalStore: new ModalStore(),\r\n\tprofileStore: new ProfileStore(),\r\n\tcommentStore: new CommentStore(),\r\n};\r\n\r\nexport const StoreContext = createContext(store);\r\n\r\nexport function useStore() {\r\n\treturn useContext(StoreContext);\r\n}\r\n","import { makeAutoObservable, reaction } from \"mobx\";\r\nimport { ServerError } from \"../models/ServerError\";\r\n\r\nexport default class CommonStore {\r\n\terror: ServerError | null = null;\r\n\ttoken: string | null = window.localStorage.getItem(\"jwt\");\r\n\tappLoaded = false;\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\r\n\t\treaction(\r\n\t\t\t() => this.token,\r\n\t\t\t(token) => {\r\n\t\t\t\tif (token) {\r\n\t\t\t\t\twindow.localStorage.setItem(\"jwt\", token);\r\n\t\t\t\t} else {\r\n\t\t\t\t\twindow.localStorage.removeItem(\"jwt\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tsetServerError = (error: ServerError) => {\r\n\t\tthis.error = error;\r\n\t};\r\n\r\n\tsetToken = (token: string | null) => {\r\n\t\tthis.token = token;\r\n\t};\r\n\r\n\tsetAppLoaded = () => {\r\n\t\tthis.appLoaded = true;\r\n\t};\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\n\r\ninterface Modal {\r\n\topen: boolean;\r\n\tbody: JSX.Element | null;\r\n}\r\n\r\nexport default class ModalStore {\r\n\tmodal: Modal = { open: false, body: null };\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\topenModal = (content: JSX.Element | null) => {\r\n\t\tthis.modal.open = true;\r\n\t\tthis.modal.body = content;\r\n\t};\r\n\r\n\tcloseModal = () => {\r\n\t\tthis.modal.open = false;\r\n\t\tthis.modal.body = null;\r\n\t};\r\n}\r\n","import { HubConnection, HubConnectionBuilder, LogLevel } from \"@microsoft/signalr\";\r\nimport { makeAutoObservable, runInAction } from \"mobx\";\r\nimport { ChatComment } from \"../models/comment\";\r\nimport { store } from \"./store\";\r\n\r\nexport default class CommentStore {\r\n\tcomments: ChatComment[] = [];\r\n\thubConnection: HubConnection | null = null;\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\tcreateHubConnection = (activityId: string) => {\r\n\t\tif (store.activityStore.selectedActivity) {\r\n\t\t\tthis.hubConnection = new HubConnectionBuilder()\r\n\t\t\t\t.withUrl(`${process.env.REACT_APP_CHAT_URL}?activityId=${activityId}`, {\r\n\t\t\t\t\taccessTokenFactory: () => store.userStore.user?.token!,\r\n\t\t\t\t})\r\n\t\t\t\t.withAutomaticReconnect()\r\n\t\t\t\t.configureLogging(LogLevel.Information)\r\n\t\t\t\t.build();\r\n\r\n\t\t\tthis.hubConnection.start().catch((e) => console.log(\"Error creating chat hub connection: \", e));\r\n\r\n\t\t\t// receive all comments to selected activity\r\n\t\t\tthis.hubConnection.on(\"LoadComments\", (comments: ChatComment[]) => {\r\n\t\t\t\trunInAction(() => {\r\n\t\t\t\t\tcomments.forEach((comment) => {\r\n\t\t\t\t\t\tcomment.createdAt = new Date(comment.createdAt.toString().split(\"+\")[0] + \"Z\");\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.comments = comments;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.hubConnection.on(\"ReceiveComment\", (comment: ChatComment) => {\r\n\t\t\t\trunInAction(() => {\r\n\t\t\t\t\tcomment.createdAt = new Date(comment.createdAt);\r\n\t\t\t\t\tthis.comments.unshift(comment);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tstopHubConnection = () => {\r\n\t\tthis.hubConnection?.stop().catch((e) => console.log(\"Error stopping hub connection: \", e));\r\n\t};\r\n\r\n\tclearComments = () => {\r\n\t\tthis.comments = [];\r\n\t\tthis.stopHubConnection();\r\n\t};\r\n\r\n\taddComment = async (values: any) => {\r\n\t\tvalues.activityId = store.activityStore.selectedActivity?.id;\r\n\r\n\t\ttry {\r\n\t\t\tawait this.hubConnection?.invoke(\"SendComment\", values);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n}\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport { Button, Container, Dropdown, Image, Menu } from \"semantic-ui-react\";\r\nimport { useStore } from \"../stores/store\";\r\n\r\nexport default observer(function NavBar() {\r\n\tconst {\r\n\t\tuserStore: { user, logout },\r\n\t} = useStore();\r\n\treturn (\r\n\t\t<Menu inverted fixed=\"top\">\r\n\t\t\t<Container>\r\n\t\t\t\t<Menu.Item as={NavLink} exact to={\"/\"} header>\r\n\t\t\t\t\t<img src=\"/assets/logo.png\" alt=\"logo\" style={{ marginRight: \"10px\" }} />\r\n\t\t\t\t\tReactivities\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t\t<Menu.Item as={NavLink} to={\"/activities\"} name=\"Activities\" />\r\n\t\t\t\t<Menu.Item as={NavLink} to={\"/errors\"} name=\"Errors\" />\r\n\t\t\t\t<Menu.Item>\r\n\t\t\t\t\t<Button as={NavLink} to={\"/createActivity\"} positive content=\"Create Activity\" />\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t\t<Menu.Item position=\"right\">\r\n\t\t\t\t\t<Image src={user?.image || \"/assets/user.png\"} avatar spaced=\"right\" />\r\n\t\t\t\t\t<Dropdown pointing=\"top left\" text={user?.displayName}>\r\n\t\t\t\t\t\t<Dropdown.Menu>\r\n\t\t\t\t\t\t\t<Dropdown.Item as={Link} to={`/profiles/${user?.username}`} text=\"Account\" icon=\"user\" />\r\n\t\t\t\t\t\t\t<Dropdown.Item onClick={logout} text=\"Log out\" icon=\"power\" />\r\n\t\t\t\t\t\t</Dropdown.Menu>\r\n\t\t\t\t\t</Dropdown>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t</Container>\r\n\t\t</Menu>\r\n\t);\r\n});\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport Calendar from \"react-calendar\";\r\nimport { Header, Menu } from \"semantic-ui-react\";\r\nimport { Filters } from \"../../../app/common/enums/Filters\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\n\r\nexport default observer(function ActivityFilters() {\r\n\tconst {\r\n\t\tactivityStore: { predicate, setPredicate },\r\n\t} = useStore();\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Menu vertical size=\"large\" style={{ width: \"100%\", marginTop: 25 }}>\r\n\t\t\t\t<Header icon=\"filter\" attached color=\"teal\" content=\"Filters\" />\r\n\t\t\t\t<Menu.Item content=\"All Activities\" active={predicate.has(Filters.all)} onClick={() => setPredicate(Filters.all, \"true\")} />\r\n\t\t\t\t<Menu.Item content=\"I'm going\" active={predicate.has(Filters.isGoing)} onClick={() => setPredicate(Filters.isGoing, \"true\")} />\r\n\t\t\t\t<Menu.Item content=\"I'm hosting\" active={predicate.has(Filters.isHost)} onClick={() => setPredicate(Filters.isHost, \"true\")} />\r\n\t\t\t</Menu>\r\n\t\t\t<Header />\r\n\t\t\t<Calendar onChange={(date: Date | null) => setPredicate(Filters.startDate, date as Date)} value={predicate.get(Filters.startDate) || new Date()} />\r\n\t\t</>\r\n\t);\r\n});\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card, Icon, Image } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../../app/models/Profile\";\r\n\r\ninterface Props {\r\n\tprofile: Profile;\r\n}\r\n\r\nexport default function ProfileCard({ profile }: Props) {\r\n\tconst truncate = (bio: string | undefined) => {\r\n\t\treturn bio !== undefined && bio.length > 40 ? bio.substring(0, 37) + \"...\" : bio;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Card as={Link} to={`/profiles/${profile.username}`}>\r\n\t\t\t<Image src={profile.image || \"/assets/user.png\"} />\r\n\t\t\t<Card.Content>\r\n\t\t\t\t<Card.Header>{profile.displayName}</Card.Header>\r\n\t\t\t\t<Card.Description> {truncate(profile.bio)}</Card.Description>\r\n\t\t\t</Card.Content>\r\n\t\t\t<Card.Content extra>\r\n\t\t\t\t<Icon name=\"user\" />\r\n\t\t\t\t{profile.followersCount} {profile.followersCount === 1 ? \"Follower\" : \"Followers\"}\r\n\t\t\t</Card.Content>\r\n\t\t\t{/* <FollowButton profile={profile} /> */}\r\n\t\t</Card>\r\n\t);\r\n}\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { List, Image, Popup } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../../app/models/profile\";\r\nimport ProfileCard from \"../../users/profiles/ProfileCard\";\r\n\r\ninterface Props {\r\n\tattendees: Profile[];\r\n}\r\n\r\nexport default observer(function ActivityListItemAttendee({ attendees }: Props) {\r\n\tconst iconStyleFollowing = {\r\n\t\tborderColor: \"orange\",\r\n\t\tborderWidth: 1,\r\n\t};\r\n\r\n\treturn (\r\n\t\t<List horizontal>\r\n\t\t\t{attendees.map((attendee) => (\r\n\t\t\t\t<Popup\r\n\t\t\t\t\thoverable\r\n\t\t\t\t\tkey={attendee.username}\r\n\t\t\t\t\ttrigger={\r\n\t\t\t\t\t\t<List.Item key={attendee.username} as={Link} to={`/profiles/${attendee.username}`}>\r\n\t\t\t\t\t\t\t<Image size=\"mini\" bordered style={attendee.following ? iconStyleFollowing : null} circular src={attendee.image || \"/assets/user.png\"} />\r\n\t\t\t\t\t\t</List.Item>\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Popup.Content>\r\n\t\t\t\t\t\t<ProfileCard profile={attendee} />\r\n\t\t\t\t\t</Popup.Content>\r\n\t\t\t\t</Popup>\r\n\t\t\t))}\r\n\t\t</List>\r\n\t);\r\n});\r\n","import { format } from \"date-fns\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Icon, Item, Label, Segment } from \"semantic-ui-react\";\r\nimport { Activity } from \"../../../app/models/Activity\";\r\nimport ActivityListItemAttendee from \"./ActivityListItemAttendee\";\r\n\r\ninterface Props {\r\n\tactivity: Activity;\r\n}\r\n\r\nexport default function ActivityListItem({ activity }: Props) {\r\n\treturn (\r\n\t\t<Segment.Group>\r\n\t\t\t<Segment>\r\n\t\t\t\t{activity.isCancelled && <Label attached=\"top\" color=\"red\" content=\"Cancelled\" />}\r\n\t\t\t\t<Item.Group>\r\n\t\t\t\t\t<Item>\r\n\t\t\t\t\t\t<Item.Image style={{ marginBottom: \"3\" }} size=\"tiny\" circular src={activity.host?.image || \"/assets/user.png\"} />\r\n\t\t\t\t\t\t<Item.Content>\r\n\t\t\t\t\t\t\t<Item.Header as={Link} to={`/activities/${activity.id}`}>\r\n\t\t\t\t\t\t\t\t{activity.title}\r\n\t\t\t\t\t\t\t</Item.Header>\r\n\t\t\t\t\t\t\t<Item.Description>\r\n\t\t\t\t\t\t\t\tHosted by <Link to={`/profiles/${activity.host?.username}`}>{activity.host?.displayName}</Link>\r\n\t\t\t\t\t\t\t</Item.Description>\r\n\t\t\t\t\t\t\t{activity.isHost && (\r\n\t\t\t\t\t\t\t\t<Label basic color=\"orange\">\r\n\t\t\t\t\t\t\t\t\tYou are hosting this activity\r\n\t\t\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{!activity.isHost && activity.isGoing && (\r\n\t\t\t\t\t\t\t\t<Label basic color=\"green\">\r\n\t\t\t\t\t\t\t\t\tYou are going to this activity\r\n\t\t\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Item.Content>\r\n\t\t\t\t\t</Item>\r\n\t\t\t\t</Item.Group>\r\n\t\t\t</Segment>\r\n\t\t\t<Segment>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<Icon name=\"clock\" /> {format(activity.date!, \"dd MMM yyyy h:mm aa\")}\r\n\t\t\t\t\t<Icon name=\"marker\" /> {activity.venue}\r\n\t\t\t\t</span>\r\n\t\t\t</Segment>\r\n\t\t\t<Segment secondary>\r\n\t\t\t\t<ActivityListItemAttendee attendees={activity.attendees!} />\r\n\t\t\t</Segment>\r\n\t\t\t<Segment clearing>\r\n\t\t\t\t<Item.Description>{activity.description}</Item.Description>\r\n\t\t\t\t<Button as={Link} to={`/activities/${activity.id}`} color=\"teal\" floated=\"right\" content=\"view\" />\r\n\t\t\t</Segment>\r\n\t\t</Segment.Group>\r\n\t);\r\n}\r\n","import { observer } from \"mobx-react-lite\";\r\nimport { Fragment } from \"react\";\r\nimport { Header } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport ActivityListItem from \"./ActivityListItem\";\r\n\r\nexport default observer(function ActivityList() {\r\n\tconst { activityStore } = useStore();\r\n\tconst { groupedActivities } = activityStore;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{groupedActivities.map(([group, activities]) => (\r\n\t\t\t\t<Fragment key={group}>\r\n\t\t\t\t\t<Header sub color=\"teal\">\r\n\t\t\t\t\t\t{group}\r\n\t\t\t\t\t</Header>\r\n\t\t\t\t\t{activities.map((activity) => {\r\n\t\t\t\t\t\treturn <ActivityListItem key={activity.id} activity={activity} />;\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Fragment>\r\n\t\t\t))}\r\n\t\t</>\r\n\t);\r\n});\r\n","import React, { Fragment } from \"react\";\r\nimport { Segment, Button, Placeholder } from \"semantic-ui-react\";\r\n\r\nexport default function ActivityListItemPlaceholder() {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Placeholder fluid style={{ marginTop: 25 }}>\r\n\t\t\t\t<Segment.Group>\r\n\t\t\t\t\t<Segment style={{ minHeight: 110 }}>\r\n\t\t\t\t\t\t<Placeholder>\r\n\t\t\t\t\t\t\t<Placeholder.Header image>\r\n\t\t\t\t\t\t\t\t<Placeholder.Line />\r\n\t\t\t\t\t\t\t\t<Placeholder.Line />\r\n\t\t\t\t\t\t\t</Placeholder.Header>\r\n\t\t\t\t\t\t\t<Placeholder.Paragraph>\r\n\t\t\t\t\t\t\t\t<Placeholder.Line />\r\n\t\t\t\t\t\t\t</Placeholder.Paragraph>\r\n\t\t\t\t\t\t</Placeholder>\r\n\t\t\t\t\t</Segment>\r\n\t\t\t\t\t<Segment>\r\n\t\t\t\t\t\t<Placeholder>\r\n\t\t\t\t\t\t\t<Placeholder.Line />\r\n\t\t\t\t\t\t\t<Placeholder.Line />\r\n\t\t\t\t\t\t</Placeholder>\r\n\t\t\t\t\t</Segment>\r\n\t\t\t\t\t<Segment secondary style={{ minHeight: 70 }} />\r\n\t\t\t\t\t<Segment clearing>\r\n\t\t\t\t\t\t<Button disabled color=\"blue\" floated=\"right\" content=\"View\" />\r\n\t\t\t\t\t</Segment>\r\n\t\t\t\t</Segment.Group>\r\n\t\t\t</Placeholder>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport InfiniteScroll from \"react-infinite-scroller\";\r\nimport { Grid, Loader } from \"semantic-ui-react\";\r\nimport { PagingParams } from \"../../../app/models/pagination\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport ActivityFilters from \"./ActivityFilters\";\r\nimport ActivityList from \"./ActivityList\";\r\nimport ActivityListItemPlaceholder from \"./ActivityListItemPlaceholder\";\r\n\r\nexport default observer(function ActivityDashboard() {\r\n\tconst { activityStore } = useStore();\r\n\tconst { loadActivities, activityRegistry, loadingInitial, setPagingParams, pagination } = activityStore;\r\n\tconst [loadingNext, setLoadingNext] = useState(false);\r\n\r\n\tfunction handleGetNext() {\r\n\t\tsetLoadingNext(true);\r\n\t\tsetPagingParams(new PagingParams(pagination!.currentPage + 1));\r\n\t\tloadActivities().then(() => setLoadingNext(false));\r\n\t}\r\n\r\n\t// fetch activities from API server if not already loaded (if size of registry is 0 or 1 in case one was just created)\r\n\tuseEffect(() => {\r\n\t\tif (activityRegistry.size <= 1) loadActivities();\r\n\t}, [activityRegistry.size, loadActivities]);\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<Grid.Column width=\"10\">\r\n\t\t\t\t{loadingInitial && !loadingNext ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<ActivityListItemPlaceholder />\r\n\t\t\t\t\t\t<ActivityListItemPlaceholder />\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<InfiniteScroll pageStart={0} loadMore={handleGetNext} hasMore={!loadingNext && !!pagination && pagination.currentPage < pagination.totalPages} initialLoad={false}>\r\n\t\t\t\t\t\t<ActivityList />\r\n\t\t\t\t\t</InfiniteScroll>\r\n\t\t\t\t)}\r\n\t\t\t</Grid.Column>\r\n\t\t\t<Grid.Column width=\"6\">\r\n\t\t\t\t<ActivityFilters />\r\n\t\t\t</Grid.Column>\r\n\t\t\t<Grid.Column width={10}>\r\n\t\t\t\t<Loader active={loadingNext}></Loader>\r\n\t\t\t</Grid.Column>\r\n\t\t</Grid>\r\n\t);\r\n});\r\n","import { useField } from \"formik\";\r\nimport React from \"react\";\r\nimport { Form, Label } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n\tname: string;\r\n\tplaceholder: string;\r\n\tlabel?: string;\r\n\ttype?: string;\r\n}\r\n\r\nexport default function CommonTextInput(props: Props) {\r\n\t// bind the name to the field input\r\n\tconst [field, meta] = useField(props.name);\r\n\treturn (\r\n\t\t<Form.Field error={meta.touched && !!meta.error}>\r\n\t\t\t<label>{props.label}</label>\r\n\t\t\t<input {...field} {...props} />\r\n\t\t\t{meta.touched && meta.error ? (\r\n\t\t\t\t<Label basic color=\"red\">\r\n\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t{meta.error}{\" \"}\r\n\t\t\t\t</Label>\r\n\t\t\t) : null}\r\n\t\t</Form.Field>\r\n\t);\r\n}\r\n","import { ErrorMessage, Form, Formik } from \"formik\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Button, Header, Label } from \"semantic-ui-react\";\r\nimport CommonTextInput from \"../../../app/common/forms/CommonTextInput\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\n\r\nexport default observer(function LoginForm() {\r\n\tconst { userStore } = useStore();\r\n\r\n\treturn (\r\n\t\t<Formik initialValues={{ email: \"\", password: \"\", error: null }} onSubmit={(values, { setErrors }) => userStore.login(values).catch((error) => setErrors({ error: \"Invalid email or password.\" }))}>\r\n\t\t\t{({ handleSubmit, isSubmitting, errors }) => (\r\n\t\t\t\t<Form className=\"ui form\" onSubmit={handleSubmit} autoComplete=\"off\">\r\n\t\t\t\t\t<Header as=\"h3\" content=\"Login\" textAlign=\"center\" />\r\n\t\t\t\t\t<CommonTextInput name=\"email\" placeholder=\"Email\" />\r\n\t\t\t\t\t<CommonTextInput name=\"password\" placeholder=\"Password\" type=\"password\" />\r\n\t\t\t\t\t<ErrorMessage name=\"error\" render={() => <Label style={{ marginBottom: \"10px\" }} color=\"red\" content={errors.error} />} />\r\n\t\t\t\t\t<Button loading={isSubmitting} positive content=\"Login\" type=\"submit\" fluid />\r\n\t\t\t\t</Form>\r\n\t\t\t)}\r\n\t\t</Formik>\r\n\t);\r\n});\r\n","import React from \"react\";\r\nimport { Message } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n\terrors: any;\r\n}\r\n\r\nexport default function ValidationErrors({ errors }: Props) {\r\n\treturn (\r\n\t\t<Message error>\r\n\t\t\t{errors && (\r\n\t\t\t\t<Message.List>\r\n\t\t\t\t\t{errors.map((err: any, i: any) => (\r\n\t\t\t\t\t\t<Message.Item key={i}>{err}</Message.Item>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Message.List>\r\n\t\t\t)}\r\n\t\t</Message>\r\n\t);\r\n}\r\n","import { ErrorMessage, Form, Formik } from \"formik\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Button, Header } from \"semantic-ui-react\";\r\nimport CommonTextInput from \"../../../app/common/forms/CommonTextInput\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport * as yup from \"yup\";\r\nimport ValidationErrors from \"../../errors/ValidationErrors\";\r\n\r\nexport default observer(function RegisterForm() {\r\n\tconst { userStore } = useStore();\r\n\r\n\treturn (\r\n\t\t<Formik\r\n\t\t\tinitialValues={{ displayName: \"\", username: \"\", email: \"\", password: \"\", error: null }}\r\n\t\t\tonSubmit={(values, { setErrors }) => userStore.register(values).catch((error) => setErrors({ error }))}\r\n\t\t\tvalidationSchema={yup.object({\r\n\t\t\t\tdisplayName: yup.string().required(),\r\n\t\t\t\tusername: yup.string().required(),\r\n\t\t\t\temail: yup.string().required().email(),\r\n\t\t\t\tpassword: yup.string().required(),\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{({ handleSubmit, isSubmitting, errors, isValid, dirty }) => (\r\n\t\t\t\t<Form className=\"ui form error\" onSubmit={handleSubmit} autoComplete=\"off\">\r\n\t\t\t\t\t<Header as=\"h3\" content=\"Registration\" textAlign=\"center\" />\r\n\t\t\t\t\t<CommonTextInput name=\"email\" placeholder=\"Email\" />\r\n\t\t\t\t\t<CommonTextInput name=\"displayName\" placeholder=\"Display name\" />\r\n\t\t\t\t\t<CommonTextInput name=\"username\" placeholder=\"Username\" />\r\n\t\t\t\t\t<CommonTextInput name=\"password\" placeholder=\"Password\" type=\"password\" />\r\n\t\t\t\t\t<ErrorMessage name=\"error\" render={() => <ValidationErrors errors={errors.error} />} />\r\n\t\t\t\t\t<Button disabled={!isValid || !dirty || isSubmitting} loading={isSubmitting} positive content=\"Sign Up\" type=\"submit\" fluid />\r\n\t\t\t\t</Form>\r\n\t\t\t)}\r\n\t\t</Formik>\r\n\t);\r\n});\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Container, Header, Image, Segment } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../app/stores/store\";\r\nimport LoginForm from \"../users/forms/LoginForm\";\r\nimport RegisterForm from \"../users/forms/RegisterForm\";\r\n\r\nexport default observer(function HomePage() {\r\n\tconst { userStore, modalStore } = useStore();\r\n\treturn (\r\n\t\t<Segment inverted textAlign=\"center\" vertical className=\"masthead\">\r\n\t\t\t<Container text>\r\n\t\t\t\t<Header as=\"h1\" inverted>\r\n\t\t\t\t\t<Image size=\"large\" src=\"/assets/logo.png\" alt=\"logo\" />\r\n\t\t\t\t\tReactivities\r\n\t\t\t\t</Header>\r\n\t\t\t\t{userStore.isLoggedIn ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Header as=\"h2\" inverted content=\"Welcome back!\" />\r\n\t\t\t\t\t\t<Button as={Link} to=\"/activities\" size=\"huge\" inverted content=\"Go to activities\" />\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Header as=\"h2\" inverted content=\"Welcome to reactivities!\" />\r\n\t\t\t\t\t\t<Button onClick={() => modalStore.openModal(<LoginForm />)} size=\"huge\" inverted content=\"Login\" />\r\n\t\t\t\t\t\t<Button onClick={() => modalStore.openModal(<RegisterForm />)} size=\"huge\" inverted content=\"Register\" />\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</Container>\r\n\t\t</Segment>\r\n\t);\r\n});\r\n","import React from \"react\";\r\nimport { Dimmer, Loader } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n\tinverted?: boolean; // darken backgroud when loading\r\n\tcontent?: string;\r\n}\r\n\r\nexport default function LoadingComponent({ inverted = true, content = \"Loading...\" }: Props) {\r\n\treturn (\r\n\t\t<Dimmer active inverted={inverted}>\r\n\t\t\t<Loader content={content} />\r\n\t\t</Dimmer>\r\n\t);\r\n}\r\n","import { useField } from \"formik\";\r\nimport React from \"react\";\r\nimport { Form, Label } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n\tname: string;\r\n\tplaceholder: string;\r\n\tlabel?: string;\r\n\trows?: number;\r\n}\r\n\r\nexport default function CommonTextArea(props: Props) {\r\n\t// bind the name to the field input\r\n\tconst [field, meta] = useField(props.name);\r\n\treturn (\r\n\t\t<Form.Field error={meta.touched && !!meta.error}>\r\n\t\t\t<label>{props.label}</label>\r\n\t\t\t<textarea {...field} {...props} rows={props.rows} />\r\n\t\t\t{meta.touched && meta.error ? (\r\n\t\t\t\t<Label basic color=\"red\">\r\n\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t{meta.error}{\" \"}\r\n\t\t\t\t</Label>\r\n\t\t\t) : null}\r\n\t\t</Form.Field>\r\n\t);\r\n}\r\n","import { useField } from \"formik\";\r\nimport React from \"react\";\r\nimport { Form, Label, Select } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n\tname: string;\r\n\tplaceholder: string;\r\n\tlabel?: string;\r\n\toptions: any;\r\n}\r\n\r\nexport default function DropdownInput(props: Props) {\r\n\t// bind the name to the field input\r\n\tconst [field, meta, helpers] = useField(props.name);\r\n\treturn (\r\n\t\t<Form.Field error={meta.touched && !!meta.error}>\r\n\t\t\t<label>{props.label}</label>\r\n\t\t\t<Select clearable options={props.options} value={field.value || null} onChange={(e, d) => helpers.setValue(d.value)} onBlur={() => helpers.setTouched(true)} placeholder={props.placeholder} />\r\n\t\t\t{meta.touched && meta.error ? (\r\n\t\t\t\t<Label basic color=\"red\">\r\n\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t{meta.error}{\" \"}\r\n\t\t\t\t</Label>\r\n\t\t\t) : null}\r\n\t\t</Form.Field>\r\n\t);\r\n}\r\n","export const categories = [\r\n\t{ text: \"Drinks\", value: \"drinks\" },\r\n\t{ text: \"Culture\", value: \"culture\" },\r\n\t{ text: \"Film\", value: \"film\" },\r\n\t{ text: \"Food\", value: \"food\" },\r\n\t{ text: \"Music\", value: \"music\" },\r\n\t{ text: \"Travel\", value: \"travel\" },\r\n];\r\n","import { useField } from \"formik\";\r\nimport React from \"react\";\r\nimport { Form, Label } from \"semantic-ui-react\";\r\nimport DatePicker, { ReactDatePickerProps } from \"react-datepicker\";\r\n\r\nexport default function DateInput(props: Partial<ReactDatePickerProps>) {\r\n\t// bind the name to the field input\r\n\tconst [field, meta, helpers] = useField(props.name!);\r\n\treturn (\r\n\t\t<Form.Field error={meta.touched && !!meta.error}>\r\n\t\t\t<DatePicker {...field} {...props} selected={(field.value && new Date(field.value)) || null} onChange={(value) => helpers.setValue(value)} />\r\n\t\t\t{meta.touched && meta.error ? (\r\n\t\t\t\t<Label basic color=\"red\">\r\n\t\t\t\t\t{meta.error}\r\n\t\t\t\t</Label>\r\n\t\t\t) : null}\r\n\t\t</Form.Field>\r\n\t);\r\n}\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router\";\r\nimport { Button, Header, Segment } from \"semantic-ui-react\";\r\nimport LoadingComponent from \"../../../app/layout/LoadingComponent\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Formik, Form } from \"formik\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport * as yup from \"yup\";\r\nimport CommonTextInput from \"../../../app/common/forms/CommonTextInput\";\r\nimport CommonTextArea from \"../../../app/common/forms/CommonTextArea\";\r\nimport DropdownInput from \"../../../app/common/forms/DropdownInput\";\r\nimport { categories } from \"../../../app/common/enums/categories\";\r\nimport DateInput from \"../../../app/common/forms/DateInput\";\r\nimport { ActivityFormValues } from \"../../../app/models/activity\";\r\n\r\nexport default observer(function ActivityForm() {\r\n\tconst history = useHistory();\r\n\tconst { activityStore } = useStore();\r\n\tconst { createActivity, loadActivity, updateActivity, loadingInitial } = activityStore;\r\n\tconst { id } = useParams<{ id: string }>();\r\n\r\n\tconst [activity, setActivity] = useState<ActivityFormValues>(new ActivityFormValues());\r\n\r\n\tconst validationSchema = yup.object({\r\n\t\ttitle: yup.string().required(\"Please enter the title!\"),\r\n\t\tcategory: yup.string().required(),\r\n\t\tdescription: yup.string().required(),\r\n\t\tdate: yup.string().required(\"Please enter a valid date!\").nullable(),\r\n\t\tcity: yup.string().required(),\r\n\t\tvenue: yup.string().required(),\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (id) loadActivity(id).then((activity) => setActivity(new ActivityFormValues(activity)));\r\n\t}, [id, loadActivity]); // by adding dependencies we only execute code if any of the dependencies changed\r\n\r\n\tfunction handleFormSubmit(activity: ActivityFormValues) {\r\n\t\tif (!activity.id) {\r\n\t\t\tlet newActivity = { ...activity, id: uuid() };\r\n\t\t\tcreateActivity(newActivity).then(() => history.push(`/activities/${newActivity.id}`));\r\n\t\t} else {\r\n\t\t\tupdateActivity(activity).then(() => history.push(`/activities/${activity.id}`));\r\n\t\t}\r\n\t}\r\n\r\n\tif (loadingInitial) return <LoadingComponent content=\"Loading activity...\" />;\r\n\r\n\treturn (\r\n\t\t<Segment clearing>\r\n\t\t\t<Header content=\"Activity details\" sub color=\"teal\"></Header>\r\n\t\t\t<Formik validationSchema={validationSchema} enableReinitialize initialValues={activity} onSubmit={(values) => handleFormSubmit(values)}>\r\n\t\t\t\t{({ handleSubmit, isValid, isSubmitting, dirty }) => (\r\n\t\t\t\t\t<Form className=\"ui form\" onSubmit={handleSubmit} autoComplete=\"false\">\r\n\t\t\t\t\t\t<CommonTextInput placeholder=\"Title\" name=\"title\" />\r\n\t\t\t\t\t\t<CommonTextArea placeholder=\"Description\" name=\"description\" />\r\n\t\t\t\t\t\t<DropdownInput options={categories} placeholder=\"Select a category\" name=\"category\" />\r\n\t\t\t\t\t\t<DateInput placeholderText=\"Date\" name=\"date\" showTimeSelect timeCaption=\"time\" dateFormat=\"MMMM d, yyyy h:mm aa\" />\r\n\t\t\t\t\t\t<Header content=\"Location details\" sub color=\"teal\" />\r\n\t\t\t\t\t\t<CommonTextInput placeholder=\"City\" name=\"city\" />\r\n\t\t\t\t\t\t<CommonTextInput placeholder=\"Venue\" name=\"venue\" />\r\n\t\t\t\t\t\t<Button disabled={isSubmitting || !dirty || !isValid} loading={isSubmitting} floated=\"right\" positive type=\"submit\" content=\"Submit\" />\r\n\t\t\t\t\t\t<Button as={Link} to={\"/activities\"} loading={isSubmitting} floated=\"right\" type=\"button\" content=\"Cancel\" />\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t)}\r\n\t\t\t</Formik>\r\n\t\t</Segment>\r\n\t);\r\n});\r\n","import { Field, FieldProps, Form, Formik } from \"formik\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport React, { useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Segment, Header, Comment, Loader } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport * as yup from \"yup\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\n\r\ninterface Props {\r\n\tactivityId: string;\r\n}\r\n\r\nexport default observer(function ActivityDetailedChat({ activityId }: Props) {\r\n\tconst { commentStore } = useStore();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (activityId) {\r\n\t\t\tcommentStore.createHubConnection(activityId);\r\n\t\t}\r\n\r\n\t\t// cleanup all comments and stop hub connection when compoment gets destroyed\r\n\t\treturn () => {\r\n\t\t\tcommentStore.clearComments();\r\n\t\t};\r\n\t}, [commentStore, activityId]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Segment textAlign=\"center\" attached=\"top\" inverted color=\"teal\" style={{ border: \"none\" }}>\r\n\t\t\t\t<Header>Chat about this event</Header>\r\n\t\t\t</Segment>\r\n\t\t\t<Segment attached clearing>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tonSubmit={(values, { resetForm }) => commentStore.addComment(values).then(() => resetForm())}\r\n\t\t\t\t\tinitialValues={{ body: \"\" }}\r\n\t\t\t\t\tvalidationSchema={yup.object({ body: yup.string().required() })}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ isSubmitting, isValid, handleSubmit }) => (\r\n\t\t\t\t\t\t<Form className=\"ui form\">\r\n\t\t\t\t\t\t\t<Field name=\"body\">\r\n\t\t\t\t\t\t\t\t{(props: FieldProps) => (\r\n\t\t\t\t\t\t\t\t\t<div style={{ position: \"relative\" }}>\r\n\t\t\t\t\t\t\t\t\t\t<Loader active={isSubmitting} />\r\n\t\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Add a comment (ENTER to submit)\"\r\n\t\t\t\t\t\t\t\t\t\t\trows={2}\r\n\t\t\t\t\t\t\t\t\t\t\t{...props.field}\r\n\t\t\t\t\t\t\t\t\t\t\tonKeyPress={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === \"Enter\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.shiftKey) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault(); // prvent starting new line\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisValid && handleSubmit();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Field>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t\t<Comment.Group>\r\n\t\t\t\t\t{commentStore.comments.map((comment) => (\r\n\t\t\t\t\t\t<Comment key={comment.id}>\r\n\t\t\t\t\t\t\t<Comment.Avatar src={comment.image || \"/assets/user.png\"} />\r\n\t\t\t\t\t\t\t<Comment.Content>\r\n\t\t\t\t\t\t\t\t<Comment.Author as={Link} to={`/profiles/${comment.username}`}>\r\n\t\t\t\t\t\t\t\t\t{comment.displayName}\r\n\t\t\t\t\t\t\t\t</Comment.Author>\r\n\t\t\t\t\t\t\t\t<Comment.Metadata>\r\n\t\t\t\t\t\t\t\t\t<div>{formatDistanceToNow(comment.createdAt)} ago</div>\r\n\t\t\t\t\t\t\t\t</Comment.Metadata>\r\n\t\t\t\t\t\t\t\t<Comment.Text style={{ whiteSpace: \"pre-wrap\" }}>{comment.body}</Comment.Text>\r\n\t\t\t\t\t\t\t</Comment.Content>\r\n\t\t\t\t\t\t</Comment>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Comment.Group>\r\n\t\t\t</Segment>\r\n\t\t</>\r\n\t);\r\n});\r\n","import { format } from \"date-fns\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Header, Item, Segment, Image, Label } from \"semantic-ui-react\";\r\nimport { Activity } from \"../../../app/models/Activity\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\n\r\nconst activityImageStyle = {\r\n\tfilter: \"brightness(30%)\",\r\n};\r\n\r\nconst activityImageTextStyle = {\r\n\tposition: \"absolute\",\r\n\tbottom: \"5%\",\r\n\tleft: \"5%\",\r\n\twidth: \"100%\",\r\n\theight: \"auto\",\r\n\tcolor: \"white\",\r\n};\r\n\r\ninterface Props {\r\n\tactivity: Activity;\r\n}\r\n\r\nexport default observer(function ActivityDetailedHeader({ activity }: Props) {\r\n\tconst {\r\n\t\tactivityStore: { updateAttendance, loading, cancelActivityToggle },\r\n\t} = useStore();\r\n\treturn (\r\n\t\t<Segment.Group>\r\n\t\t\t<Segment basic attached=\"top\" style={{ padding: \"0\" }}>\r\n\t\t\t\t{activity.isCancelled && <Label style={{ position: \"absolute\", zIndex: \"100\", left: \"-14\", top: \"20\" }} ribbon color=\"red\" content=\"Cancelled\" />}\r\n\t\t\t\t<Image src={`/assets/categoryImages/${activity.category}.jpg`} fluid style={activityImageStyle} />\r\n\t\t\t\t<Segment style={activityImageTextStyle} basic>\r\n\t\t\t\t\t<Item.Group>\r\n\t\t\t\t\t\t<Item>\r\n\t\t\t\t\t\t\t<Item.Content>\r\n\t\t\t\t\t\t\t\t<Header size=\"huge\" content={activity.title} style={{ color: \"white\" }} />\r\n\t\t\t\t\t\t\t\t<p>{activity.date != null ? format(activity.date!, \"dd MMM yyyy\") : \"\"}</p>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tHosted by{\" \"}\r\n\t\t\t\t\t\t\t\t\t<strong>\r\n\t\t\t\t\t\t\t\t\t\t<Link to={`/profiles/${activity.host?.username}`}>{activity.host?.displayName}</Link>\r\n\t\t\t\t\t\t\t\t\t</strong>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</Item.Content>\r\n\t\t\t\t\t\t</Item>\r\n\t\t\t\t\t</Item.Group>\r\n\t\t\t\t</Segment>\r\n\t\t\t</Segment>\r\n\t\t\t<Segment clearing attached=\"bottom\">\r\n\t\t\t\t{activity.isHost ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Button onClick={cancelActivityToggle} color={activity.isCancelled ? \"green\" : \"red\"} floated=\"left\" basic loading={loading}>\r\n\t\t\t\t\t\t\t{activity.isCancelled ? \"Reactivate\" : \"Cancel\"}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button disabled={activity.isCancelled} as={Link} to={`/manage/${activity.id}`} color=\"orange\" floated=\"right\">\r\n\t\t\t\t\t\t\tManage Event\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : activity.isGoing ? (\r\n\t\t\t\t\t<Button onClick={updateAttendance} loading={loading}>\r\n\t\t\t\t\t\tCancel attendance\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Button disabled={activity.isCancelled} onClick={updateAttendance} loading={loading} color=\"teal\">\r\n\t\t\t\t\t\tJoin Activity\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t</Segment>\r\n\t\t</Segment.Group>\r\n\t);\r\n});\r\n","import { format } from \"date-fns\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Segment, Grid, Icon } from \"semantic-ui-react\";\r\nimport { Activity } from \"../../../app/models/Activity\";\r\n\r\ninterface Props {\r\n\tactivity: Activity;\r\n}\r\n\r\nexport default observer(function ActivityDetailedInfo({ activity }: Props) {\r\n\treturn (\r\n\t\t<Segment.Group>\r\n\t\t\t<Segment attached=\"top\">\r\n\t\t\t\t<Grid>\r\n\t\t\t\t\t<Grid.Column width={1}>\r\n\t\t\t\t\t\t<Icon size=\"large\" color=\"teal\" name=\"info\" />\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t<Grid.Column width={15}>\r\n\t\t\t\t\t\t<p>{activity.description}</p>\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Segment>\r\n\t\t\t<Segment attached>\r\n\t\t\t\t<Grid verticalAlign=\"middle\">\r\n\t\t\t\t\t<Grid.Column width={1}>\r\n\t\t\t\t\t\t<Icon name=\"calendar\" size=\"large\" color=\"teal\" />\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t<Grid.Column width={15}>\r\n\t\t\t\t\t\t<span>{activity.date != null ? format(activity.date!, \"dd MMM yyyy h:mm aa\") : \"\"}</span>\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Segment>\r\n\t\t\t<Segment attached>\r\n\t\t\t\t<Grid verticalAlign=\"middle\">\r\n\t\t\t\t\t<Grid.Column width={1}>\r\n\t\t\t\t\t\t<Icon name=\"marker\" size=\"large\" color=\"teal\" />\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t<Grid.Column width={11}>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{activity.venue}, {activity.city}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Segment>\r\n\t\t</Segment.Group>\r\n\t);\r\n});\r\n","import React from \"react\";\r\nimport { Segment, List, Label, Item, Image } from \"semantic-ui-react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Activity } from \"../../../app/models/Activity\";\r\n\r\ninterface Props {\r\n\tactivity: Activity;\r\n}\r\n\r\nexport default observer(function ActivityDetailedSidebar({ activity: { attendees, host } }: Props) {\r\n\tif (!attendees) return null;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Segment textAlign=\"center\" style={{ border: \"none\" }} attached=\"top\" secondary inverted color=\"teal\">\r\n\t\t\t\t{attendees.length} {attendees.length === 1 ? \"Person\" : \"People\"} going\r\n\t\t\t</Segment>\r\n\t\t\t<Segment attached>\r\n\t\t\t\t<List relaxed divided>\r\n\t\t\t\t\t{attendees.map((attendee) => (\r\n\t\t\t\t\t\t<Item style={{ position: \"relative\" }} key={attendee.username}>\r\n\t\t\t\t\t\t\t{attendee.username === host?.username && (\r\n\t\t\t\t\t\t\t\t<Label style={{ position: \"absolute\" }} color=\"orange\" ribbon=\"right\">\r\n\t\t\t\t\t\t\t\t\tHost\r\n\t\t\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t<Image size=\"tiny\" src={attendee.image || \"/assets/user.png\"} />\r\n\t\t\t\t\t\t\t<Item.Content verticalAlign=\"middle\">\r\n\t\t\t\t\t\t\t\t<Item.Header as=\"h3\">\r\n\t\t\t\t\t\t\t\t\t<Link to={`/profiles/${attendee.username}`}>{attendee.displayName}</Link>\r\n\t\t\t\t\t\t\t\t</Item.Header>\r\n\t\t\t\t\t\t\t\t{attendee.following && <Item.Extra style={{ color: \"orange\" }}>Following</Item.Extra>}\r\n\t\t\t\t\t\t\t</Item.Content>\r\n\t\t\t\t\t\t</Item>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</List>\r\n\t\t\t</Segment>\r\n\t\t</>\r\n\t);\r\n});\r\n","import { observer } from \"mobx-react-lite\";\r\nimport { useEffect } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport { Grid } from \"semantic-ui-react\";\r\nimport LoadingComponent from \"../../../app/layout/LoadingComponent\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport ActivityDetailedChat from \"./ActivityDetailedChat\";\r\nimport ActivityDetailedHeader from \"./ActivityDetailedHeader\";\r\nimport ActivityDetailedInfo from \"./ActivityDetailedInfo\";\r\nimport ActivityDetailedSidebar from \"./ActivityDetailedSidebar\";\r\n\r\nexport default observer(function ActivityDetails() {\r\n\tconst { activityStore } = useStore();\r\n\tconst { selectedActivity: activity, loadActivity, loadingInitial, clearSelectedActivity } = activityStore;\r\n\tconst { id } = useParams<{ id: string }>();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (id) loadActivity(id);\r\n\r\n\t\treturn () => clearSelectedActivity();\r\n\t}, [id, loadActivity, clearSelectedActivity]);\r\n\r\n\tif (loadingInitial || !activity) return <LoadingComponent />; // just to remove the error of undefined on activity\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<Grid.Column width=\"10\">\r\n\t\t\t\t<ActivityDetailedHeader activity={activity} />\r\n\t\t\t\t<ActivityDetailedInfo activity={activity} />\r\n\t\t\t\t<ActivityDetailedChat activityId={activity.id} />\r\n\t\t\t</Grid.Column>\r\n\t\t\t<Grid.Column width=\"6\">\r\n\t\t\t\t<ActivityDetailedSidebar activity={activity} />\r\n\t\t\t</Grid.Column>\r\n\t\t</Grid>\r\n\t);\r\n});\r\n","import React, { useState } from \"react\";\r\nimport { Button, Header, Segment } from \"semantic-ui-react\";\r\nimport axios from \"axios\";\r\nimport ValidationErrors from \"./ValidationErrors\";\r\n\r\nexport default function TestErrors() {\r\n\tconst baseUrl = process.env.REACT_APP_API_URL;\r\n\tconst [errors, setErrors] = useState(null);\r\n\r\n\tfunction handleNotFound() {\r\n\t\taxios.get(baseUrl + \"buggy/not-found\").catch((err) => console.log(err.response));\r\n\t}\r\n\r\n\tfunction handleBadRequest() {\r\n\t\taxios.get(baseUrl + \"buggy/bad-request\").catch((err) => console.log(err.response));\r\n\t}\r\n\r\n\tfunction handleServerError() {\r\n\t\taxios.get(baseUrl + \"buggy/server-error\").catch((err) => console.log(err.response));\r\n\t}\r\n\r\n\tfunction handleUnauthorised() {\r\n\t\taxios.get(baseUrl + \"buggy/unauthorised\").catch((err) => console.log(err.response));\r\n\t}\r\n\r\n\tfunction handleBadGuid() {\r\n\t\taxios.get(baseUrl + \"activities/notaguid\").catch((err) => console.log(err.response));\r\n\t}\r\n\r\n\tfunction handleValidationError() {\r\n\t\taxios.post(baseUrl + \"activities\", {}).catch((err) => setErrors(err));\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Header as=\"h1\" content=\"Test Error component\" />\r\n\t\t\t<Segment>\r\n\t\t\t\t<Button.Group widths=\"7\">\r\n\t\t\t\t\t<Button onClick={handleNotFound} content=\"Not Found\" basic primary />\r\n\t\t\t\t\t<Button onClick={handleBadRequest} content=\"Bad Request\" basic primary />\r\n\t\t\t\t\t<Button onClick={handleValidationError} content=\"Validation Error\" basic primary />\r\n\t\t\t\t\t<Button onClick={handleServerError} content=\"Server Error\" basic primary />\r\n\t\t\t\t\t<Button onClick={handleUnauthorised} content=\"Unauthorised\" basic primary />\r\n\t\t\t\t\t<Button onClick={handleBadGuid} content=\"Bad Guid\" basic primary />\r\n\t\t\t\t</Button.Group>\r\n\t\t\t</Segment>\r\n\t\t\t{errors && <ValidationErrors errors={errors} />}\r\n\t\t</>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Button, Header, Icon, Segment } from \"semantic-ui-react\";\r\n\r\nexport default function NotFound() {\r\n\treturn (\r\n\t\t<Segment placeholder size=\"large\">\r\n\t\t\t<Header icon>\r\n\t\t\t\t<Icon name=\"search\" />\r\n\t\t\t\tOops! I cannot find the item you are looking for!\r\n\t\t\t</Header>\r\n\t\t\t<Segment.Inline>\r\n\t\t\t\t<Button primary as={NavLink} to={\"/activities\"} content=\"Go back\" />\r\n\t\t\t</Segment.Inline>\r\n\t\t</Segment>\r\n\t);\r\n}\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Header, Segment } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../app/stores/store\";\r\n\r\nexport default observer(function ServerError() {\r\n\tconst { commonStore } = useStore();\r\n\r\n\treturn (\r\n\t\t<Segment>\r\n\t\t\t<Header as=\"h1\" content=\"Server Error Occured\" />\r\n\t\t\t<Header sub as=\"h5\" color=\"red\" content={commonStore.error?.message} />\r\n\t\t\t{commonStore.error?.details && (\r\n\t\t\t\t<Segment>\r\n\t\t\t\t\t<Header as=\"h4\" content=\"stack trace\" color=\"teal\" />\r\n\t\t\t\t\t<code style={{ marginTop: \"10px\" }}>{commonStore.error.details}</code>\r\n\t\t\t\t</Segment>\r\n\t\t\t)}\r\n\t\t</Segment>\r\n\t);\r\n});\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Modal } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../stores/store\";\r\n\r\nexport default observer(function ModalContainer() {\r\n\tconst { modalStore } = useStore();\r\n\treturn (\r\n\t\t<Modal open={modalStore.modal.open} onClose={modalStore.closeModal} size=\"mini\">\r\n\t\t\t<Modal.Content>{modalStore.modal.body}</Modal.Content>\r\n\t\t</Modal>\r\n\t);\r\n});\r\n","import { format } from \"date-fns\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card, Image } from \"semantic-ui-react\";\r\nimport { UserActivity } from \"../../../app/models/Profile\";\r\n\r\ninterface Props {\r\n\tactivity: UserActivity;\r\n}\r\n\r\nexport default function ActivityCard({ activity }: Props) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Card as={Link} to={`/activities/${activity.id}`} key={activity.id}>\r\n\t\t\t\t<Image src={`/assets/categoryImages/${activity.category}.jpg`} style={{ minHeight: 100, objectFit: \"cover\" }} />\r\n\t\t\t\t<Card.Content>\r\n\t\t\t\t\t<Card.Header textAlign=\"center\">{activity.title}</Card.Header>\r\n\t\t\t\t\t<Card.Meta textAlign=\"center\">\r\n\t\t\t\t\t\t<div>{format(new Date(activity.date), \"do LLLL\")}</div>\r\n\t\t\t\t\t\t<div>{format(new Date(activity.date), \"h:mm aa\")}</div>\r\n\t\t\t\t\t</Card.Meta>\r\n\t\t\t\t</Card.Content>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n}\r\n","import { observer } from \"mobx-react-lite\";\r\nimport { SyntheticEvent, useEffect } from \"react\";\r\nimport { Card, Grid, Header, Tab, TabProps } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport ActivityCard from \"./ActivityCard\";\r\n\r\nexport default observer(function ProfileActivities() {\r\n\tconst {\r\n\t\tprofileStore: { loadingActivities, loadActivities, activities, profile },\r\n\t} = useStore();\r\n\r\n\tconst panes = [\r\n\t\t{ menuItem: \"Future Events\", pane: { key: \"future\" } },\r\n\t\t{ menuItem: \"Past Events\", pane: { key: \"past\" } },\r\n\t\t{ menuItem: \"Hosting\", pane: { key: \"hosting\" } },\r\n\t];\r\n\r\n\tuseEffect(() => {\r\n\t\tloadActivities(profile!.username);\r\n\t}, [loadActivities, profile]);\r\n\r\n\tconst handleTabChange = (e: SyntheticEvent, data: TabProps) => {\r\n\t\tloadActivities(profile!.username, panes[data.activeIndex as number].pane.key);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Tab.Pane loading={loadingActivities}>\r\n\t\t\t\t<Grid>\r\n\t\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t\t<Header floated=\"left\" icon=\"calendar\" content={\"Activities\"} />\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\tmenu={{ secondary: true, pointing: true }}\r\n\t\t\t\t\t\t\tpanes={panes}\r\n\t\t\t\t\t\t\tonTabChange={(e, data) => {\r\n\t\t\t\t\t\t\t\thandleTabChange(e, data);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<Card.Group itemsPerRow={4}>\r\n\t\t\t\t\t\t\t{activities.map((activity) => (\r\n\t\t\t\t\t\t\t\t<ActivityCard key={activity.id} activity={activity} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Card.Group>\r\n\t\t\t\t\t</Grid.Column>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Tab.Pane>\r\n\t\t</>\r\n\t);\r\n});\r\n","import { Form, Formik } from \"formik\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Button } from \"semantic-ui-react\";\r\nimport CommonTextArea from \"../../../app/common/forms/CommonTextArea\";\r\nimport CommonTextInput from \"../../../app/common/forms/CommonTextInput\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport * as yup from \"yup\";\r\n\r\ninterface Props {\r\n\tsetEditMode: (editMode: boolean) => void;\r\n}\r\n\r\nexport default observer(function ProfileEditForm({ setEditMode }: Props) {\r\n\tconst {\r\n\t\tprofileStore: { profile, updateProfile },\r\n\t} = useStore();\r\n\treturn (\r\n\t\t<Formik\r\n\t\t\tinitialValues={{ displayName: profile?.displayName, bio: profile?.bio }}\r\n\t\t\tonSubmit={(values) => updateProfile(values).then(() => setEditMode(false))}\r\n\t\t\tvalidationSchema={yup.object({\r\n\t\t\t\tdisplayName: yup.string().required(),\r\n\t\t\t})}\r\n\t\t>\r\n\t\t\t{({ isSubmitting, isValid, dirty }) => (\r\n\t\t\t\t<Form className=\"ui form\" autoComplete=\"off\">\r\n\t\t\t\t\t<CommonTextInput name=\"displayName\" placeholder={profile?.displayName ?? \"Enter a display name\"} />\r\n\t\t\t\t\t<CommonTextArea name=\"bio\" placeholder={profile?.bio ?? \"Enter a bio\"} />\r\n\t\t\t\t\t<Button loading={isSubmitting} content=\"Save\" positive type=\"submit\" fluid disabled={!isValid || !dirty} />\r\n\t\t\t\t</Form>\r\n\t\t\t)}\r\n\t\t</Formik>\r\n\t);\r\n});\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React, { useState } from \"react\";\r\nimport { Button, Divider, Grid, Header, Tab } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport ProfileEditForm from \"../forms/ProfileEditForm\";\r\n\r\nexport default observer(function ProfileFollowings() {\r\n\tconst {\r\n\t\tprofileStore: { isCurrentUser, profile },\r\n\t} = useStore();\r\n\tconst [editProfileMode, setEditProfileMode] = useState(false);\r\n\r\n\treturn (\r\n\t\t<Tab.Pane>\r\n\t\t\t<Grid>\r\n\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t<Header floated=\"left\" icon=\"user\" content={`About ${profile?.displayName}`} />\r\n\t\t\t\t\t{isCurrentUser && <Button floated=\"right\" basic content={editProfileMode ? \"Cancel\" : \"Edit\"} onClick={() => setEditProfileMode(!editProfileMode)} />}\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t{editProfileMode ? (\r\n\t\t\t\t\t\t<ProfileEditForm setEditMode={setEditProfileMode} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<div>{profile?.bio}</div>\r\n\t\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t</Grid>\r\n\t\t</Tab.Pane>\r\n\t);\r\n});\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Card, Grid, Header, Tab } from \"semantic-ui-react\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport ProfileCard from \"./ProfileCard\";\r\n\r\nexport default observer(function ProfileFollowings() {\r\n\tconst { profileStore } = useStore();\r\n\tconst { profile, followings, activeTab, loadingFollowings } = profileStore;\r\n\r\n\treturn (\r\n\t\t<Tab.Pane loading={loadingFollowings}>\r\n\t\t\t<Grid>\r\n\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t<Header floated=\"left\" icon=\"user\" content={activeTab === 3 ? `People following ${profile?.displayName}` : `People ${profile?.displayName} is following`} />\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t<Card.Group itemsPerRow={4}>\r\n\t\t\t\t\t\t{followings.map((profile) => (\r\n\t\t\t\t\t\t\t<ProfileCard key={profile.username} profile={profile} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Card.Group>\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t</Grid>\r\n\t\t</Tab.Pane>\r\n\t);\r\n});\r\n","import React from \"react\";\r\nimport \"cropperjs/dist/cropper.css\";\r\nimport Cropper from \"react-cropper\";\r\n\r\ninterface Props {\r\n\tsetCropper: (cropper: Cropper) => void;\r\n\tpreview: string;\r\n}\r\n\r\nexport default function PhotoWidgetCropper({ setCropper, preview }: Props) {\r\n\treturn (\r\n\t\t<Cropper\r\n\t\t\tsrc={preview}\r\n\t\t\tstyle={{ height: 200, width: \"100%\" }}\r\n\t\t\t// aspect ratio will enforce square images\r\n\t\t\tinitialAspectRatio={1}\r\n\t\t\taspectRatio={1}\r\n\t\t\tpreview=\".img-preview\"\r\n\t\t\tguides={false}\r\n\t\t\tviewMode={1}\r\n\t\t\tautoCropArea={1}\r\n\t\t\tbackground={false}\r\n\t\t\tonInitialized={(cropper) => setCropper(cropper)}\r\n\t\t/>\r\n\t);\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { Header, Icon } from \"semantic-ui-react\";\r\n\r\ninterface Props {\r\n\tsetFiles: (files: any) => void;\r\n}\r\n\r\nexport default function PhotoWidgetDropzone({ setFiles }: Props) {\r\n\tconst dropzoneStyle = {\r\n\t\tborder: \"dashed 3px #eee\",\r\n\t\tborderColor: \"#eee\",\r\n\t\tborderRadius: \"5px\",\r\n\t\tpaddingTop: \"30px\",\r\n\t\ttextAlign: \"center\" as \"center\", // mitigating TS warning\r\n\t\theight: 200,\r\n\t};\r\n\r\n\tconst activeDropzoneStyle = {\r\n\t\tborderColor: \"green\",\r\n\t};\r\n\r\n\tconst onDrop = useCallback(\r\n\t\t(acceptedFiles) => {\r\n\t\t\tsetFiles(\r\n\t\t\t\t// get preview of the dropped image\r\n\t\t\t\tacceptedFiles.map((file: any) =>\r\n\t\t\t\t\tObject.assign(file, {\r\n\t\t\t\t\t\tpreview: URL.createObjectURL(file),\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t},\r\n\t\t[setFiles]\r\n\t);\r\n\r\n\tconst { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\r\n\r\n\treturn (\r\n\t\t<div {...getRootProps()} style={isDragActive ? { ...dropzoneStyle, ...activeDropzoneStyle } : dropzoneStyle}>\r\n\t\t\t<input {...getInputProps()} />\r\n\t\t\t<Icon name=\"upload\" size=\"huge\" />\r\n\t\t\t<Header content=\"Drop image here\" />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Grid, Header } from \"semantic-ui-react\";\r\nimport PhotoWidgetCropper from \"./PhotoWidgetCropper\";\r\nimport PhotoWidgetDropzone from \"./PhotoWidgetDropzone\";\r\n\r\ninterface Props {\r\n\tloading: boolean;\r\n\tuploadPhoto: (file: Blob) => void;\r\n}\r\n\r\nexport default function PhotoUploadWidget({ loading, uploadPhoto }: Props) {\r\n\tconst [files, setFiles] = useState<any>([]);\r\n\tconst [cropper, setCropper] = useState<Cropper>();\r\n\r\n\tfunction onCrop() {\r\n\t\tif (cropper) {\r\n\t\t\tcropper.getCroppedCanvas().toBlob((blob) => uploadPhoto(blob!));\r\n\t\t}\r\n\t}\r\n\r\n\t// cleanup preview urls\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tfiles.forEach((file: any) => URL.revokeObjectURL(file.preview));\r\n\t\t};\r\n\t}, [files]);\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<Grid.Column width={4}>\r\n\t\t\t\t<Header sub color=\"teal\" content=\"Step 1 - Add Photo\"></Header>\r\n\t\t\t\t<PhotoWidgetDropzone setFiles={setFiles} />\r\n\t\t\t</Grid.Column>\r\n\t\t\t<Grid.Column width={1} />\r\n\t\t\t<Grid.Column width={4}>\r\n\t\t\t\t<Header sub color=\"teal\" content=\"Step 2 - Resize Image\"></Header>\r\n\t\t\t\t{files && files.length > 0 && <PhotoWidgetCropper setCropper={setCropper} preview={files[0].preview} />}\r\n\t\t\t</Grid.Column>\r\n\t\t\t<Grid.Column width={1} />\r\n\t\t\t<Grid.Column width={4}>\r\n\t\t\t\t<Header sub color=\"teal\" content=\"Step 3 - Preview and Upload\"></Header>\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"img-preview\" style={{ minHeight: 200, overflow: \"hidden\" }} />\r\n\t\t\t\t\t{files && files.length > 0 && (\r\n\t\t\t\t\t\t<Button.Group widths={2}>\r\n\t\t\t\t\t\t\t<Button icon=\"check\" loading={loading} onClick={onCrop} positive />\r\n\t\t\t\t\t\t\t<Button icon=\"close\" disable={loading ? true : false} onClick={() => setFiles([])} />\r\n\t\t\t\t\t\t</Button.Group>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t</Grid.Column>\r\n\t\t</Grid>\r\n\t);\r\n}\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React, { SyntheticEvent, useState } from \"react\";\r\nimport { Card, Header, Tab, Image, Grid, Button, Icon } from \"semantic-ui-react\";\r\nimport PhotoUploadWidget from \"../../../app/common/uploads/PhotoUploadWidget\";\r\nimport { Photo, Profile } from \"../../../app/models/Profile\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\n\r\ninterface Props {\r\n\tprofile: Profile;\r\n}\r\n\r\nexport default observer(function ProfilePhotos({ profile }: Props) {\r\n\tconst { profileStore } = useStore();\r\n\tconst [addPhotoMode, setAddPhotoMode] = useState(false);\r\n\tconst [target, setTarget] = useState(\"\");\r\n\r\n\tfunction handleUploadPhoto(file: Blob) {\r\n\t\tprofileStore.uploadPhoto(file).then(() => setAddPhotoMode(false));\r\n\t}\r\n\r\n\tfunction handleSetMainPhoto(photo: Photo, event: SyntheticEvent<HTMLButtonElement>) {\r\n\t\tsetTarget(event.currentTarget.name);\r\n\t\tprofileStore.setMainPhoto(photo);\r\n\t}\r\n\r\n\tfunction handleDeletePhoto(photo: Photo, event: SyntheticEvent<HTMLButtonElement>) {\r\n\t\tsetTarget(event.currentTarget.name);\r\n\t\tprofileStore.deletePhoto(photo);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Tab.Pane>\r\n\t\t\t<Grid>\r\n\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t<Header floated=\"left\" icon=\"image\" content=\"Photos\" />\r\n\t\t\t\t\t{profileStore.isCurrentUser && <Button floated=\"right\" basic content={addPhotoMode ? \"Cancel\" : \"Add Photo\"} onClick={() => setAddPhotoMode(!addPhotoMode)} />}\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t\t{addPhotoMode ? (\r\n\t\t\t\t\t\t<PhotoUploadWidget uploadPhoto={handleUploadPhoto} loading={profileStore.uploading} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Card.Group itemsPerRow={5}>\r\n\t\t\t\t\t\t\t{profile.photos?.map((photo) => (\r\n\t\t\t\t\t\t\t\t<Card key={photo.id}>\r\n\t\t\t\t\t\t\t\t\t<Image src={photo.url} />\r\n\t\t\t\t\t\t\t\t\t{profileStore.isCurrentUser && (\r\n\t\t\t\t\t\t\t\t\t\t<Button.Group fluid widths={2}>\r\n\t\t\t\t\t\t\t\t\t\t\t{/* set main button */}\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tanimated=\"vertical\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"green\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => handleSetMainPhoto(photo, e)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={\"main\" + photo.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={photo.isMain}\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading={target === \"main\" + photo.id && profileStore.loadingPhoto}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button.Content visible>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon name=\"user circle\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button.Content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button.Content hidden content=\"set main\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{/* delete button */}\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tanimated=\"vertical\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={photo.isMain}\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={photo.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => handleDeletePhoto(photo, e)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tloading={target === photo.id && profileStore.loadingPhoto}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button.Content visible>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon name=\"trash\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button.Content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button.Content hidden color=\"red\" content=\"delete\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</Button.Group>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Card.Group>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t</Grid>\r\n\t\t</Tab.Pane>\r\n\t);\r\n});\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Tab } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../../app/models/Profile\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport ProfileActivities from \"./ProfileActivities\";\r\nimport ProfileDetails from \"./ProfileDetails\";\r\nimport ProfileFollowings from \"./ProfileFollowings\";\r\nimport ProfilePhotos from \"./ProfilePhotos\";\r\n\r\ninterface Props {\r\n\tprofile: Profile;\r\n}\r\n\r\nexport default observer(function ProfileContent({ profile }: Props) {\r\n\tconst { profileStore } = useStore();\r\n\r\n\tconst panes = [\r\n\t\t{ menuItem: \"About\", render: () => <ProfileDetails /> },\r\n\t\t{ menuItem: \"Photos\", render: () => <ProfilePhotos profile={profile} /> },\r\n\t\t{ menuItem: \"Events\", render: () => <ProfileActivities /> },\r\n\t\t{ menuItem: \"Followers\", render: () => <ProfileFollowings /> },\r\n\t\t{ menuItem: \"Following\", render: () => <ProfileFollowings /> },\r\n\t];\r\n\treturn (\r\n\t\t<Tab\r\n\t\t\tmenu={{ fluid: true, vertical: true }}\r\n\t\t\tmenuPosition=\"right\"\r\n\t\t\tpanes={panes}\r\n\t\t\tonTabChange={(e, data) => {\r\n\t\t\t\tprofileStore.setActiveTab(data.activeIndex);\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n});\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React, { SyntheticEvent } from \"react\";\r\nimport { Button, Reveal } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../../app/models/Profile\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\n\r\ninterface Props {\r\n\tprofile: Profile;\r\n}\r\n\r\nexport default observer(function FollowButton({ profile }: Props) {\r\n\tconst { profileStore, userStore } = useStore();\r\n\tconst { updateFollowing, loadingProfile } = profileStore;\r\n\r\n\tfunction handleFollow(e: SyntheticEvent, username: string) {\r\n\t\t// prevent button from opening user profile\r\n\t\te.preventDefault();\r\n\t\tupdateFollowing(username, !profile.following);\r\n\t}\r\n\r\n\t// dont display button if reviewing own profile\r\n\tif (userStore.user?.username === profile.username) return null;\r\n\treturn (\r\n\t\t<Reveal animated=\"move\">\r\n\t\t\t<Reveal.Content visible style={{ width: \"100%\" }}>\r\n\t\t\t\t<Button fluid color=\"teal\" content={profile.following ? \"Following\" : \"Not following\"} />\r\n\t\t\t</Reveal.Content>\r\n\t\t\t<Reveal.Content hidden style={{ width: \"100%\" }}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tbasic\r\n\t\t\t\t\tloading={loadingProfile}\r\n\t\t\t\t\tonClick={(e) => handleFollow(e, profile.username)}\r\n\t\t\t\t\tcolor={profile.following ? \"red\" : \"green\"}\r\n\t\t\t\t\tcontent={profile.following ? \"Unfollow\" : \"Follow\"}\r\n\t\t\t\t/>\r\n\t\t\t</Reveal.Content>\r\n\t\t</Reveal>\r\n\t);\r\n});\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React from \"react\";\r\nimport { Divider, Grid, Header, Item, Segment, Statistic } from \"semantic-ui-react\";\r\nimport { Profile } from \"../../../app/models/Profile\";\r\nimport FollowButton from \"./FollowButton\";\r\n\r\ninterface Props {\r\n\tprofile: Profile;\r\n}\r\n\r\nexport default observer(function ProfileHeader({ profile }: Props) {\r\n\treturn (\r\n\t\t<Segment>\r\n\t\t\t<Grid>\r\n\t\t\t\t<Grid.Column width={12}>\r\n\t\t\t\t\t<Item.Group>\r\n\t\t\t\t\t\t<Item>\r\n\t\t\t\t\t\t\t<Item.Image avatar size=\"small\" src={profile.image || \"/assets/user.png\"} />\r\n\t\t\t\t\t\t\t<Item.Content verticalAlign=\"middle\">\r\n\t\t\t\t\t\t\t\t<Header as=\"h1\" content={profile.displayName} />\r\n\t\t\t\t\t\t\t</Item.Content>\r\n\t\t\t\t\t\t</Item>\r\n\t\t\t\t\t</Item.Group>\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t\t<Grid.Column width={4}>\r\n\t\t\t\t\t<Statistic.Group>\r\n\t\t\t\t\t\t<Statistic label=\"Following\" value={profile.followingsCount} />\r\n\t\t\t\t\t\t<Statistic label={profile.followersCount === 1 ? \"Follower\" : \"Followers\"} value={profile.followersCount} />\r\n\t\t\t\t\t</Statistic.Group>\r\n\t\t\t\t\t<Divider></Divider>\r\n\t\t\t\t\t<FollowButton profile={profile} />\r\n\t\t\t\t</Grid.Column>\r\n\t\t\t</Grid>\r\n\t\t</Segment>\r\n\t);\r\n});\r\n","import { observer } from \"mobx-react-lite\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Grid } from \"semantic-ui-react\";\r\nimport LoadingComponent from \"../../../app/layout/LoadingComponent\";\r\nimport { useStore } from \"../../../app/stores/store\";\r\nimport ProfileContent from \"./ProfileContent\";\r\nimport ProfileHeader from \"./ProfileHeader\";\r\n\r\nexport default observer(function ProfilePage() {\r\n\tconst { username } = useParams<{ username: string }>();\r\n\tconst { profileStore } = useStore();\r\n\tconst { loadingProfile, loadProfile, profile, setActiveTab } = profileStore;\r\n\r\n\tuseEffect(() => {\r\n\t\tloadProfile(username);\r\n\t\treturn () => setActiveTab(0);\r\n\t}, [loadProfile, username, setActiveTab]);\r\n\r\n\tif (loadingProfile) return <LoadingComponent content=\"Loading profile...\" />;\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<Grid.Column width={16}>\r\n\t\t\t\t{profile && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<ProfileHeader profile={profile} />\r\n\t\t\t\t\t\t<ProfileContent profile={profile} />\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</Grid.Column>\r\n\t\t</Grid>\r\n\t);\r\n});\r\n","import React from \"react\";\r\nimport { Redirect, Route, RouteComponentProps, RouteProps } from \"react-router-dom\";\r\nimport { useStore } from \"../stores/store\";\r\n\r\ninterface Props extends RouteProps {\r\n\tcomponent: React.ComponentType<RouteComponentProps<any>> | React.ComponentType<any>;\r\n}\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }: Props) {\r\n\tconst {\r\n\t\tuserStore: { isLoggedIn },\r\n\t} = useStore();\r\n\r\n\treturn <Route {...rest} render={(props) => (isLoggedIn ? <Component {...props} /> : <Redirect to={\"/\"} />)} />;\r\n}\r\n","import React, { useEffect } from \"react\";\nimport { Container } from \"semantic-ui-react\";\nimport NavBar from \"./NavBar\";\nimport ActivityDashboard from \"../../features/activities/dashboard/ActivityDashboard\";\nimport { observer } from \"mobx-react-lite\";\nimport { Route, Switch } from \"react-router\";\nimport HomePage from \"../../features/home/HomePage\";\nimport ActivityForm from \"../../features/activities/forms/ActivityForm\";\nimport ActivityDetails from \"../../features/activities/details/ActivityDetails\";\nimport { useLocation } from \"react-router-dom\";\nimport TestErrors from \"../../features/errors/TestErrors\";\nimport { ToastContainer } from \"react-toastify\";\nimport NotFound from \"../../features/errors/NotFound\";\nimport ServerError from \"../../features/errors/ServerError\";\nimport { useStore } from \"../stores/store\";\nimport LoadingComponent from \"./LoadingComponent\";\nimport ModalContainer from \"../common/modals/ModalContainer\";\nimport ProfilePage from \"../../features/users/profiles/ProfilePage\";\nimport PrivateRoute from \"./PrivateRoute\";\n\nfunction App() {\n\tconst location = useLocation();\n\tconst { commonStore, userStore } = useStore();\n\n\tuseEffect(() => {\n\t\tif (commonStore.token) {\n\t\t\tuserStore.getUser().finally(() => commonStore.setAppLoaded());\n\t\t} else {\n\t\t\tcommonStore.setAppLoaded();\n\t\t}\n\t}, [userStore, commonStore]);\n\n\tif (!commonStore.appLoaded) return <LoadingComponent content=\"Loading app...\" />;\n\treturn (\n\t\t<>\n\t\t\t<ToastContainer position=\"bottom-right\" hideProgressBar></ToastContainer>\n\t\t\t<ModalContainer />\n\t\t\t<Route exact path=\"/\" component={HomePage} />\n\t\t\t<Route\n\t\t\t\tpath={\"/(.+)\"}\n\t\t\t\trender={() => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<NavBar />\n\t\t\t\t\t\t<Container style={{ marginTop: \"8em\" }}>\n\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t<PrivateRoute exact path=\"/activities\" component={ActivityDashboard} />\n\t\t\t\t\t\t\t\t<PrivateRoute path=\"/activities/:id\" component={ActivityDetails} />\n\t\t\t\t\t\t\t\t<PrivateRoute path=\"/profiles/:username\" component={ProfilePage} />\n\t\t\t\t\t\t\t\t<PrivateRoute key={location.key} path={[\"/createActivity\", \"/manage/:id\"]} component={ActivityForm} />\n\t\t\t\t\t\t\t\t<PrivateRoute path=\"/errors\" component={TestErrors} />\n\t\t\t\t\t\t\t\t<Route path=\"/server-error\" component={ServerError} />\n\n\t\t\t\t\t\t\t\t{/* default route if undefined route entered */}\n\t\t\t\t\t\t\t\t<Route component={NotFound} />\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nexport default observer(App);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nexport default function ScrollToTop() {\r\n\tconst { pathname } = useLocation();\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.scrollTo(0, 0);\r\n\t}, [pathname]);\r\n\r\n\treturn null;\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"react-calendar/dist/Calendar.css\";\nimport \"react-toastify/dist/ReactToastify.min.css\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"./app/layout/styles.css\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport App from \"./app/layout/App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { store, StoreContext } from \"./app/stores/store\";\nimport { Router } from \"react-router-dom\";\nimport { createBrowserHistory } from \"history\";\nimport ScrollToTop from \"./app/layout/ScrollToTop\";\n\nexport const history = createBrowserHistory();\n\nReactDOM.render(\n\t// provide context to the application\n\t<StoreContext.Provider value={store}>\n\t\t<Router history={history}>\n\t\t\t<ScrollToTop />\n\t\t\t<App />\n\t\t</Router>\n\t</StoreContext.Provider>,\n\tdocument.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}